{"version":3,"sources":["webpack:///node_modules/@angular/cdk/esm2015/bidi.js","webpack:///node_modules/@angular/cdk/esm2015/coercion.js","webpack:///node_modules/@angular/cdk/esm2015/collections.js","webpack:///node_modules/@angular/cdk/esm2015/platform.js","webpack:///node_modules/@angular/cdk/esm2015/scrolling.js","webpack:///src/app/pages/orders-list/orders-list.module.ts","webpack:///src/app/pages/orders-list/orders-list.page.html","webpack:///src/app/pages/orders-list/orders-list.page.ts"],"names":["DIR_DOCUMENT","providedIn","factory","DIR_DOCUMENT_FACTORY","Directionality","_document","value","change","bodyDir","body","dir","htmlDir","documentElement","complete","ɵfac","Directionality_Factory","t","ɵprov","token","ngInjectableDef","Dir","_dir","_isInitialized","old","normalizedValue","toLowerCase","_rawDir","emit","Dir_Factory","ɵdir","type","selectors","hostVars","hostBindings","Dir_HostBindings","rf","ctx","inputs","outputs","exportAs","features","provide","useExisting","BidiModule","ɵmod","ɵinj","BidiModule_Factory","ngJitMode","declarations","exports","coerceBooleanProperty","coerceNumberProperty","fallbackValue","_isNumberValue","Number","isNaN","parseFloat","coerceArray","Array","isArray","coerceCssPixelValue","coerceElement","elementOrRef","nativeElement","DataSource","isDataSource","connect","ArrayDataSource","_data","SelectionModel","_multiple","initiallySelectedValues","_emitChanges","_selection","Set","_deselectedToEmit","_selectedToEmit","changed","onChange","length","forEach","_markSelected","values","_verifyValueAssignment","_emitChangeEvent","_unmarkSelected","isSelected","deselect","select","_unmarkAll","has","size","isEmpty","predicate","selected","_selected","sort","next","source","added","removed","add","push","getMultipleValuesInSingleSelectionError","from","Error","UniqueSelectionDispatcher","_listeners","id","name","listener","filter","registered","UniqueSelectionDispatcher_Factory","hasV8BreakIterator","Intl","v8BreakIterator","_a","Platform","_platformId","isBrowser","document","EDGE","test","navigator","userAgent","TRIDENT","BLINK","window","chrome","CSS","WEBKIT","IOS","FIREFOX","ANDROID","SAFARI","Platform_Factory","PlatformModule","PlatformModule_Factory","supportedInputTypes","candidateInputTypes","getSupportedInputTypes","featureTestInput","createElement","setAttribute","supportsPassiveEvents","supportsPassiveEventListeners","addEventListener","Object","defineProperty","get","normalizePassiveListenerOptions","options","capture","RtlScrollAxisType","NORMAL","NEGATED","INVERTED","rtlScrollAxisType","supportsScrollBehavior","style","getRtlScrollAxisType","scrollContainer","containerStyle","height","width","overflow","visibility","pointerEvents","position","content","contentStyle","appendChild","scrollLeft","parentNode","removeChild","shadowDomIsSupported","_supportsShadowDom","head","createShadowRoot","attachShadow","_c0","_c1","VIRTUAL_SCROLL_STRATEGY","FixedSizeVirtualScrollStrategy","itemSize","minBufferPx","maxBufferPx","_scrolledIndexChange","scrolledIndexChange","pipe","_viewport","_itemSize","_minBufferPx","_maxBufferPx","viewport","_updateTotalContentSize","_updateRenderedRange","index","behavior","scrollToOffset","setTotalContentSize","getDataLength","scrollOffset","measureScrollOffset","firstVisibleIndex","renderedRange","getRenderedRange","newRange","start","end","viewportSize","getViewportSize","dataLength","startBuffer","expandStart","Math","ceil","max","min","endBuffer","expandEnd","floor","setRenderedRange","setRenderedContentOffset","_fixedSizeVirtualScrollStrategyFactory","fixedSizeDir","_scrollStrategy","CdkFixedSizeVirtualScroll","updateItemAndBufferSize","CdkFixedSizeVirtualScroll_Factory","useFactory","deps","DEFAULT_SCROLL_TIME","ScrollDispatcher","_ngZone","_platform","_scrolled","_globalSubscription","_scrolledCount","scrollContainers","Map","scrollable","set","elementScrolled","subscribe","scrollableReference","unsubscribe","auditTimeInMs","observer","_addGlobalListener","subscription","_removeGlobalListener","_","container","deregister","elementRef","ancestors","getAncestorScrollContainers","scrolled","target","indexOf","scrollingContainers","_subscription","_scrollableContainsElement","element","scrollableElement","getElementRef","parentElement","runOutsideAngular","ScrollDispatcher_Factory","SCROLL_DISPATCHER_PROVIDER_FACTORY","parentDispatcher","ngZone","platform","SCROLL_DISPATCHER_PROVIDER","CdkScrollable","scrollDispatcher","_destroyed","_elementScrolled","register","el","isRtl","left","right","bottom","top","scrollHeight","clientHeight","scrollWidth","clientWidth","_applyScrollToOptions","scrollTo","scrollTop","LEFT","RIGHT","CdkScrollable_Factory","rangesEqual","r1","r2","SCROLL_SCHEDULER","requestAnimationFrame","CdkVirtualScrollViewport","_changeDetectorRef","_detachedSubject","_renderedRangeSubject","_orientation","Promise","resolve","then","run","renderedRangeStream","asObservable","_totalContentSize","_totalContentWidth","_totalContentHeight","_renderedRange","_dataLength","_viewportSize","_renderedContentOffset","_renderedContentOffsetNeedsRewrite","_isChangeDetectionPending","_runAfterChangeDetection","_measureViewportSize","attach","onContentScrolled","_markChangeDetectionNeeded","detach","forOf","_forOf","dataStream","data","newLength","onDataLengthChanged","_doChangeDetection","_calculateSpacerSize","range","onContentRendered","offset","to","isHorizontal","orientation","axis","axisDirection","transform","_renderedContentTransform","measureRenderedContentSize","onRenderedOffsetChanged","scrollToIndex","contentEl","_contentWrapper","offsetWidth","offsetHeight","measureRangeSize","viewportEl","runAfter","markForCheck","runAfterChangeDetection","fn","CdkVirtualScrollViewport_Factory","ɵcmp","viewQuery","CdkVirtualScrollViewport_Query","_t","first","hostAttrs","CdkVirtualScrollViewport_HostBindings","ngContentSelectors","decls","vars","consts","template","CdkVirtualScrollViewport_Template","styles","encapsulation","changeDetection","getSize","node","getBoundingClientRect","rect","CdkVirtualForOf","_viewContainerRef","_template","_differs","viewChange","_dataSourceChanges","cdkVirtualForTemplateCacheSize","prev","cur","_changeDataSource","_differ","_templateCache","_needsUpdate","_onRenderedDataChange","renderedStartIndex","rangeLen","totalSize","i","view","j","rootNodes","changes","diff","_renderedItems","_updateContext","_applyChanges","destroy","slice","find","create","cdkVirtualForTrackBy","oldDs","newDs","disconnect","count","context","_updateComputedContextProperties","detectChanges","forEachOperation","record","adjustedPreviousIndex","currentIndex","previousIndex","_insertViewForNewItem","$implicit","item","_cacheView","_detachView","move","forEachIdentityChange","remove","_insertViewFromCache","_createEmbeddedViewAt","last","even","odd","createEmbeddedView","cdkVirtualForOf","_cdkVirtualForOf","cachedView","pop","insert","ds","prototype","call","_cdkVirtualForTrackBy","undefined","CdkVirtualForOf_Factory","cdkVirtualForTemplate","ScrollingModule","ScrollingModule_Factory","imports","ScrollDispatchModule","ScrollDispatchModule_Factory","DEFAULT_RESIZE_TIME","ViewportRuler","_change","_invalidateCache","_updateViewportSize","output","scrollPosition","getViewportScrollPosition","documentRect","scrollY","scrollX","throttleTime","innerWidth","innerHeight","ViewportRuler_Factory","VIEWPORT_RULER_PROVIDER_FACTORY","parentRuler","VIEWPORT_RULER_PROVIDER","routes","path","component","OrderListPageModule","forChild","CONFIG","GA","PAGE_NAME","EVENT","NAME","ACTION","MULTIPLE_SELECT_TRANSITION","ORDER_LIST_FORCING_SYNC","ORDER_ITEM_SWIPE","ORDER_TRANSITION","MAP_DID_LEAVE_EVENT","OrdersListPage","orderService","orderSync","notificationService","transitionService","navCtrl","ionicDeploy","deviceInfo","menuCtrl","settingsManager","modalCtrl","log","toastCtrl","translateService","connectionStatusService","mobileContextService","featuresService","popoverCtrl","ga","router","mapService","commonUtils","orderGroups","allSelected","hasOneSelected","searching","transitionsSelection","timeReference","settings","statusSettings","refreshInProgress","disabledSpecialGroups","allOrders","unsubscribeAccessor","connectionStatus","canOptimize","canReorder","optimizationInProgress","dummySequenceNumber","isCordova","connectionStatusClass","sendSequence","withHints","approxHeaderHeight","approxItemHeight","orderOnTheWayStatus","ON_THE_WAY_TO_CUSTOMER","items","SLIDING_ITEM_OPEN_RATIO","isIos","isMobileWeb","swUpdateAvailable","showGroupHeader","recordIndex","records","workflowGroup","group","isWorkflowGroup","inWorkflowGroup","order","stateMachineWorkflow","orders","toString","tenantName","selectedProviders","provider","p","tenantId","subtitle","address","addressOneLine","e","console","warn","itemHeightFn","url","status","READY_FOR_HAULAGE","ON_THE_WAY_TO_PROVIDER","searchControl","ready","isDebug","is","trackView","error","info","lorem","images","getImgSrc","src","rotateImg","imgSrc","avatarSrc","imgHeight","random","substring","trackOrderGroupByBound","trackOrderGroupBy","bind","setCurrentStatus","timer","setInterval","searchControlSubscription","valueChanges","search","filterChanged","orderAccessorSubscription","ordersAccessor","accessor","manageNewOrders","loadRouteSummary","connectionStatusSubscription","connectionStatusHasChanged","isSameForUserAs","isNetworkConnectedForUser","isMqttConnectedForUser","userSettingsSubscription","userSettingsObservable","canDoRouteOptimization","sequenceOnSelect","settingsForStatus","providers","some","hiddenForPage","hidden","summarySubscription","summaryObservable","summary","unreadNotificationCountSubscription","unreadNotificationCountObservable","pending","pendingNotifications","ionicStatusSubscription","observableStatus","deployStatus","featureSubscription","featuresObservable","cleanup","clearInterval","displayTroobleshootingModal","trackEvent","fullSync","cancelSearch","transition","requireOnline","blocked","slidingItem","getSlidingRatio","local","nextSequenceNumber","transitionOrder","close","callback","selectedOrders","orderGroup","containsTransition","transitions","updateSelection","actions","canSelect","groupedByWorkflowEvent","a","b","activatedTransition","event","labelKey","matchingTransition","matches","transitionOrders","message","instant","buttons","text","role","duration","cssClass","toast","present","componentProps","withDistance","sortOrder","itemModal","onDidDismiss","success","maxSequence","groupByProvider","previousSortOrder","sortChanged","applyFilterAndSort","option","orderView","markItem","groupName","header","startsWith","orderItem","byOrderItemHidden","byGroupName","groupViewHidden","byTenant","modalPage","o","convert","routeSummary","startPosition","optimizeRoute","endPosition","positionType","startAt","withTimeConstraints","updateSummary","hasAtLeastOneSelected","rank","ev","toggle","resetFilters","byStatus","getList","groups","groupA","groupB","localeCompare","splice","activeFilter","filtering","existingInList","findIndex","trace","apply","_index","hashCode","contains","k","len","existingTransition","flipGrouping","popover","hintsIntroJs","setOptions","hintButtonLabel","hints","hint","showHints","hideHints","openMap","openMenu"],"mappings":"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","file":"0-es5.ab0d438c9a9b3c2a5a66.js","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { DOCUMENT } from '@angular/common';\nimport { inject, InjectionToken, EventEmitter, Inject, Injectable, Optional, Directive, Output, Input, NgModule, ɵɵdefineInjectable, ɵɵinject } from '@angular/core';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Injection token used to inject the document into Directionality.\n * This is used so that the value can be faked in tests.\n *\n * We can't use the real document in tests because changing the real `dir` causes geometry-based\n * tests in Safari to fail.\n *\n * We also can't re-provide the DOCUMENT token from platform-brower because the unit tests\n * themselves use things like `querySelector` in test code.\n *\n * This token is defined in a separate file from Directionality as a workaround for\n * https://github.com/angular/angular/issues/22559\n *\n * \\@docs-private\n * @type {?}\n */\nimport * as ɵngcc0 from '@angular/core';\nconst DIR_DOCUMENT = new InjectionToken('cdk-dir-doc', {\n    providedIn: 'root',\n    factory: DIR_DOCUMENT_FACTORY,\n});\n/**\n * \\@docs-private\n * @return {?}\n */\nfunction DIR_DOCUMENT_FACTORY() {\n    return inject(DOCUMENT);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * The directionality (LTR / RTL) context for the application (or a subtree of it).\n * Exposes the current direction and a stream of direction changes.\n */\nclass Directionality {\n    /**\n     * @param {?=} _document\n     */\n    constructor(_document) {\n        /**\n         * The current 'ltr' or 'rtl' value.\n         */\n        this.value = 'ltr';\n        /**\n         * Stream that emits whenever the 'ltr' / 'rtl' state changes.\n         */\n        this.change = new EventEmitter();\n        if (_document) {\n            // TODO: handle 'auto' value -\n            // We still need to account for dir=\"auto\".\n            // It looks like HTMLElemenet.dir is also \"auto\" when that's set to the attribute,\n            // but getComputedStyle return either \"ltr\" or \"rtl\". avoiding getComputedStyle for now\n            /** @type {?} */\n            const bodyDir = _document.body ? _document.body.dir : null;\n            /** @type {?} */\n            const htmlDir = _document.documentElement ? _document.documentElement.dir : null;\n            /** @type {?} */\n            const value = bodyDir || htmlDir;\n            this.value = (value === 'ltr' || value === 'rtl') ? value : 'ltr';\n        }\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this.change.complete();\n    }\n}\nDirectionality.ɵfac = function Directionality_Factory(t) { return new (t || Directionality)(ɵngcc0.ɵɵinject(DIR_DOCUMENT, 8)); };\nDirectionality.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: Directionality, factory: Directionality.ɵfac, providedIn: 'root' });\n/** @nocollapse */\nDirectionality.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [DIR_DOCUMENT,] }] }\n];\n/** @nocollapse */ Directionality.ngInjectableDef = ɵɵdefineInjectable({ factory: function Directionality_Factory() { return new Directionality(ɵɵinject(DIR_DOCUMENT, 8)); }, token: Directionality, providedIn: \"root\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(Directionality, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [DIR_DOCUMENT]\n            }] }]; }, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Directive to listen for changes of direction of part of the DOM.\n *\n * Provides itself as Directionality such that descendant directives only need to ever inject\n * Directionality to get the closest direction.\n */\nclass Dir {\n    constructor() {\n        /**\n         * Normalized direction that accounts for invalid/unsupported values.\n         */\n        this._dir = 'ltr';\n        /**\n         * Whether the `value` has been set to its initial value.\n         */\n        this._isInitialized = false;\n        /**\n         * Event emitted when the direction changes.\n         */\n        this.change = new EventEmitter();\n    }\n    /**\n     * \\@docs-private\n     * @return {?}\n     */\n    get dir() { return this._dir; }\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n    set dir(value) {\n        /** @type {?} */\n        const old = this._dir;\n        /** @type {?} */\n        const normalizedValue = value ? value.toLowerCase() : value;\n        this._rawDir = value;\n        this._dir = (normalizedValue === 'ltr' || normalizedValue === 'rtl') ? normalizedValue : 'ltr';\n        if (old !== this._dir && this._isInitialized) {\n            this.change.emit(this._dir);\n        }\n    }\n    /**\n     * Current layout direction of the element.\n     * @return {?}\n     */\n    get value() { return this.dir; }\n    /**\n     * Initialize once default value has been set.\n     * @return {?}\n     */\n    ngAfterContentInit() {\n        this._isInitialized = true;\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this.change.complete();\n    }\n}\nDir.ɵfac = function Dir_Factory(t) { return new (t || Dir)(); };\nDir.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: Dir, selectors: [[\"\", \"dir\", \"\"]], hostVars: 1, hostBindings: function Dir_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"dir\", ctx._rawDir);\n    } }, inputs: { dir: \"dir\" }, outputs: { change: \"dirChange\" }, exportAs: [\"dir\"], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: Directionality, useExisting: Dir }])] });\nDir.propDecorators = {\n    change: [{ type: Output, args: ['dirChange',] }],\n    dir: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(Dir, [{\n        type: Directive,\n        args: [{\n                selector: '[dir]',\n                providers: [{ provide: Directionality, useExisting: Dir }],\n                host: { '[attr.dir]': '_rawDir' },\n                exportAs: 'dir'\n            }]\n    }], function () { return []; }, { change: [{\n            type: Output,\n            args: ['dirChange']\n        }], dir: [{\n            type: Input\n        }] }); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass BidiModule {\n}\nBidiModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: BidiModule });\nBidiModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function BidiModule_Factory(t) { return new (t || BidiModule)(); } });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(BidiModule, { declarations: [Dir], exports: [Dir] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(BidiModule, [{\n        type: NgModule,\n        args: [{\n                exports: [Dir],\n                declarations: [Dir]\n            }]\n    }], null, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { Directionality, DIR_DOCUMENT, Dir, BidiModule, DIR_DOCUMENT_FACTORY as ɵa };\n\n//# sourceMappingURL=bidi.js.map","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { ElementRef } from '@angular/core';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * Coerces a data-bound value (typically a string) to a boolean.\n * @param {?} value\n * @return {?}\n */\nfunction coerceBooleanProperty(value) {\n    return value != null && `${value}` !== 'false';\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @param {?} value\n * @param {?=} fallbackValue\n * @return {?}\n */\nfunction coerceNumberProperty(value, fallbackValue = 0) {\n    return _isNumberValue(value) ? Number(value) : fallbackValue;\n}\n/**\n * Whether the provided value is considered a number.\n * \\@docs-private\n * @param {?} value\n * @return {?}\n */\nfunction _isNumberValue(value) {\n    // parseFloat(value) handles most of the cases we're interested in (it treats null, empty string,\n    // and other non-number values as NaN, where Number just uses 0) but it considers the string\n    // '123hello' to be a valid number. Therefore we also check if Number(value) is NaN.\n    return !isNaN(parseFloat((/** @type {?} */ (value)))) && !isNaN(Number(value));\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * Wraps the provided value in an array, unless the provided value is an array.\n * @template T\n * @param {?} value\n * @return {?}\n */\nfunction coerceArray(value) {\n    return Array.isArray(value) ? value : [value];\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * Coerces a value to a CSS pixel value.\n * @param {?} value\n * @return {?}\n */\nfunction coerceCssPixelValue(value) {\n    if (value == null) {\n        return '';\n    }\n    return typeof value === 'string' ? value : `${value}px`;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Coerces an ElementRef or an Element into an element.\n * Useful for APIs that can accept either a ref or the native element itself.\n * @template T\n * @param {?} elementOrRef\n * @return {?}\n */\nfunction coerceElement(elementOrRef) {\n    return elementOrRef instanceof ElementRef ? elementOrRef.nativeElement : elementOrRef;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { coerceBooleanProperty, coerceNumberProperty, _isNumberValue, coerceArray, coerceCssPixelValue, coerceElement };\n\n//# sourceMappingURL=coercion.js.map","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { Observable, of, Subject } from 'rxjs';\nimport { Injectable, ɵɵdefineInjectable } from '@angular/core';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @abstract\n * @template T\n */\nimport * as ɵngcc0 from '@angular/core';\nclass DataSource {\n}\n/**\n * Checks whether an object is a data source.\n * @param {?} value\n * @return {?}\n */\nfunction isDataSource(value) {\n    // Check if the value is a DataSource by observing if it has a connect function. Cannot\n    // be checked as an `instanceof DataSource` since people could create their own sources\n    // that match the interface, but don't extend DataSource.\n    return value && typeof value.connect === 'function';\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * DataSource wrapper for a native array.\n * @template T\n */\nclass ArrayDataSource extends DataSource {\n    /**\n     * @param {?} _data\n     */\n    constructor(_data) {\n        super();\n        this._data = _data;\n    }\n    /**\n     * @return {?}\n     */\n    connect() {\n        return this._data instanceof Observable ? this._data : of(this._data);\n    }\n    /**\n     * @return {?}\n     */\n    disconnect() { }\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Class to be used to power selecting one or more options from a list.\n * @template T\n */\nclass SelectionModel {\n    /**\n     * @param {?=} _multiple\n     * @param {?=} initiallySelectedValues\n     * @param {?=} _emitChanges\n     */\n    constructor(_multiple = false, initiallySelectedValues, _emitChanges = true) {\n        this._multiple = _multiple;\n        this._emitChanges = _emitChanges;\n        /**\n         * Currently-selected values.\n         */\n        this._selection = new Set();\n        /**\n         * Keeps track of the deselected options that haven't been emitted by the change event.\n         */\n        this._deselectedToEmit = [];\n        /**\n         * Keeps track of the selected options that haven't been emitted by the change event.\n         */\n        this._selectedToEmit = [];\n        /**\n         * Event emitted when the value has changed.\n         */\n        this.changed = new Subject();\n        /**\n         * Event emitted when the value has changed.\n         * @deprecated Use `changed` instead.\n         * \\@breaking-change 8.0.0 To be changed to `changed`\n         */\n        this.onChange = this.changed;\n        if (initiallySelectedValues && initiallySelectedValues.length) {\n            if (_multiple) {\n                initiallySelectedValues.forEach((/**\n                 * @param {?} value\n                 * @return {?}\n                 */\n                value => this._markSelected(value)));\n            }\n            else {\n                this._markSelected(initiallySelectedValues[0]);\n            }\n            // Clear the array in order to avoid firing the change event for preselected values.\n            this._selectedToEmit.length = 0;\n        }\n    }\n    /**\n     * Selected values.\n     * @return {?}\n     */\n    get selected() {\n        if (!this._selected) {\n            this._selected = Array.from(this._selection.values());\n        }\n        return this._selected;\n    }\n    /**\n     * Selects a value or an array of values.\n     * @param {...?} values\n     * @return {?}\n     */\n    select(...values) {\n        this._verifyValueAssignment(values);\n        values.forEach((/**\n         * @param {?} value\n         * @return {?}\n         */\n        value => this._markSelected(value)));\n        this._emitChangeEvent();\n    }\n    /**\n     * Deselects a value or an array of values.\n     * @param {...?} values\n     * @return {?}\n     */\n    deselect(...values) {\n        this._verifyValueAssignment(values);\n        values.forEach((/**\n         * @param {?} value\n         * @return {?}\n         */\n        value => this._unmarkSelected(value)));\n        this._emitChangeEvent();\n    }\n    /**\n     * Toggles a value between selected and deselected.\n     * @param {?} value\n     * @return {?}\n     */\n    toggle(value) {\n        this.isSelected(value) ? this.deselect(value) : this.select(value);\n    }\n    /**\n     * Clears all of the selected values.\n     * @return {?}\n     */\n    clear() {\n        this._unmarkAll();\n        this._emitChangeEvent();\n    }\n    /**\n     * Determines whether a value is selected.\n     * @param {?} value\n     * @return {?}\n     */\n    isSelected(value) {\n        return this._selection.has(value);\n    }\n    /**\n     * Determines whether the model does not have a value.\n     * @return {?}\n     */\n    isEmpty() {\n        return this._selection.size === 0;\n    }\n    /**\n     * Determines whether the model has a value.\n     * @return {?}\n     */\n    hasValue() {\n        return !this.isEmpty();\n    }\n    /**\n     * Sorts the selected values based on a predicate function.\n     * @param {?=} predicate\n     * @return {?}\n     */\n    sort(predicate) {\n        if (this._multiple && this.selected) {\n            (/** @type {?} */ (this._selected)).sort(predicate);\n        }\n    }\n    /**\n     * Gets whether multiple values can be selected.\n     * @return {?}\n     */\n    isMultipleSelection() {\n        return this._multiple;\n    }\n    /**\n     * Emits a change event and clears the records of selected and deselected values.\n     * @private\n     * @return {?}\n     */\n    _emitChangeEvent() {\n        // Clear the selected values so they can be re-cached.\n        this._selected = null;\n        if (this._selectedToEmit.length || this._deselectedToEmit.length) {\n            this.changed.next({\n                source: this,\n                added: this._selectedToEmit,\n                removed: this._deselectedToEmit\n            });\n            this._deselectedToEmit = [];\n            this._selectedToEmit = [];\n        }\n    }\n    /**\n     * Selects a value.\n     * @private\n     * @param {?} value\n     * @return {?}\n     */\n    _markSelected(value) {\n        if (!this.isSelected(value)) {\n            if (!this._multiple) {\n                this._unmarkAll();\n            }\n            this._selection.add(value);\n            if (this._emitChanges) {\n                this._selectedToEmit.push(value);\n            }\n        }\n    }\n    /**\n     * Deselects a value.\n     * @private\n     * @param {?} value\n     * @return {?}\n     */\n    _unmarkSelected(value) {\n        if (this.isSelected(value)) {\n            this._selection.delete(value);\n            if (this._emitChanges) {\n                this._deselectedToEmit.push(value);\n            }\n        }\n    }\n    /**\n     * Clears out the selected values.\n     * @private\n     * @return {?}\n     */\n    _unmarkAll() {\n        if (!this.isEmpty()) {\n            this._selection.forEach((/**\n             * @param {?} value\n             * @return {?}\n             */\n            value => this._unmarkSelected(value)));\n        }\n    }\n    /**\n     * Verifies the value assignment and throws an error if the specified value array is\n     * including multiple values while the selection model is not supporting multiple values.\n     * @private\n     * @param {?} values\n     * @return {?}\n     */\n    _verifyValueAssignment(values) {\n        if (values.length > 1 && !this._multiple) {\n            throw getMultipleValuesInSingleSelectionError();\n        }\n    }\n}\n/**\n * Returns an error that reports that multiple values are passed into a selection model\n * with a single value.\n * \\@docs-private\n * @return {?}\n */\nfunction getMultipleValuesInSingleSelectionError() {\n    return Error('Cannot pass multiple values into SelectionModel with single-value mode.');\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Class to coordinate unique selection based on name.\n * Intended to be consumed as an Angular service.\n * This service is needed because native radio change events are only fired on the item currently\n * being selected, and we still need to uncheck the previous selection.\n *\n * This service does not *store* any IDs and names because they may change at any time, so it is\n * less error-prone if they are simply passed through when the events occur.\n */\nclass UniqueSelectionDispatcher {\n    constructor() {\n        this._listeners = [];\n    }\n    /**\n     * Notify other items that selection for the given name has been set.\n     * @param {?} id ID of the item.\n     * @param {?} name Name of the item.\n     * @return {?}\n     */\n    notify(id, name) {\n        for (let listener of this._listeners) {\n            listener(id, name);\n        }\n    }\n    /**\n     * Listen for future changes to item selection.\n     * @param {?} listener\n     * @return {?} Function used to deregister listener\n     */\n    listen(listener) {\n        this._listeners.push(listener);\n        return (/**\n         * @return {?}\n         */\n        () => {\n            this._listeners = this._listeners.filter((/**\n             * @param {?} registered\n             * @return {?}\n             */\n            (registered) => {\n                return listener !== registered;\n            }));\n        });\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this._listeners = [];\n    }\n}\nUniqueSelectionDispatcher.ɵfac = function UniqueSelectionDispatcher_Factory(t) { return new (t || UniqueSelectionDispatcher)(); };\nUniqueSelectionDispatcher.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: UniqueSelectionDispatcher, factory: UniqueSelectionDispatcher.ɵfac, providedIn: 'root' });\n/** @nocollapse */ UniqueSelectionDispatcher.ngInjectableDef = ɵɵdefineInjectable({ factory: function UniqueSelectionDispatcher_Factory() { return new UniqueSelectionDispatcher(); }, token: UniqueSelectionDispatcher, providedIn: \"root\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(UniqueSelectionDispatcher, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return []; }, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { UniqueSelectionDispatcher, ArrayDataSource, isDataSource, DataSource, getMultipleValuesInSingleSelectionError, SelectionModel };\n\n//# sourceMappingURL=collections.js.map","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { Inject, Injectable, Optional, PLATFORM_ID, NgModule, ɵɵdefineInjectable, ɵɵinject } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// Whether the current platform supports the V8 Break Iterator. The V8 check\n// is necessary to detect all Blink based browsers.\n/** @type {?} */\nimport * as ɵngcc0 from '@angular/core';\nlet hasV8BreakIterator;\n// We need a try/catch around the reference to `Intl`, because accessing it in some cases can\n// cause IE to throw. These cases are tied to particular versions of Windows and can happen if\n// the consumer is providing a polyfilled `Map`. See:\n// https://github.com/Microsoft/ChakraCore/issues/3189\n// https://github.com/angular/components/issues/15687\ntry {\n    hasV8BreakIterator = (typeof Intl !== 'undefined' && ((/** @type {?} */ (Intl))).v8BreakIterator);\n}\ncatch (_a) {\n    hasV8BreakIterator = false;\n}\n/**\n * Service to detect the current platform by comparing the userAgent strings and\n * checking browser-specific global properties.\n */\nclass Platform {\n    /**\n     * \\@breaking-change 8.0.0 remove optional decorator\n     * @param {?=} _platformId\n     */\n    constructor(_platformId) {\n        this._platformId = _platformId;\n        /**\n         * Whether the Angular application is being rendered in the browser.\n         * We want to use the Angular platform check because if the Document is shimmed\n         * without the navigator, the following checks will fail. This is preferred because\n         * sometimes the Document may be shimmed without the user's knowledge or intention\n         */\n        this.isBrowser = this._platformId ?\n            isPlatformBrowser(this._platformId) : typeof document === 'object' && !!document;\n        /**\n         * Whether the current browser is Microsoft Edge.\n         */\n        this.EDGE = this.isBrowser && /(edge)/i.test(navigator.userAgent);\n        /**\n         * Whether the current rendering engine is Microsoft Trident.\n         */\n        this.TRIDENT = this.isBrowser && /(msie|trident)/i.test(navigator.userAgent);\n        /**\n         * Whether the current rendering engine is Blink.\n         */\n        // EdgeHTML and Trident mock Blink specific things and need to be excluded from this check.\n        this.BLINK = this.isBrowser && (!!(((/** @type {?} */ (window))).chrome || hasV8BreakIterator) &&\n            typeof CSS !== 'undefined' && !this.EDGE && !this.TRIDENT);\n        /**\n         * Whether the current rendering engine is WebKit.\n         */\n        // Webkit is part of the userAgent in EdgeHTML, Blink and Trident. Therefore we need to\n        // ensure that Webkit runs standalone and is not used as another engine's base.\n        this.WEBKIT = this.isBrowser &&\n            /AppleWebKit/i.test(navigator.userAgent) && !this.BLINK && !this.EDGE && !this.TRIDENT;\n        /**\n         * Whether the current platform is Apple iOS.\n         */\n        this.IOS = this.isBrowser && /iPad|iPhone|iPod/.test(navigator.userAgent) &&\n            !('MSStream' in window);\n        /**\n         * Whether the current browser is Firefox.\n         */\n        // It's difficult to detect the plain Gecko engine, because most of the browsers identify\n        // them self as Gecko-like browsers and modify the userAgent's according to that.\n        // Since we only cover one explicit Firefox case, we can simply check for Firefox\n        // instead of having an unstable check for Gecko.\n        this.FIREFOX = this.isBrowser && /(firefox|minefield)/i.test(navigator.userAgent);\n        /**\n         * Whether the current platform is Android.\n         */\n        // Trident on mobile adds the android platform to the userAgent to trick detections.\n        this.ANDROID = this.isBrowser && /android/i.test(navigator.userAgent) && !this.TRIDENT;\n        /**\n         * Whether the current browser is Safari.\n         */\n        // Safari browsers will include the Safari keyword in their userAgent. Some browsers may fake\n        // this and just place the Safari keyword in the userAgent. To be more safe about Safari every\n        // Safari browser should also use Webkit as its layout engine.\n        this.SAFARI = this.isBrowser && /safari/i.test(navigator.userAgent) && this.WEBKIT;\n    }\n}\nPlatform.ɵfac = function Platform_Factory(t) { return new (t || Platform)(ɵngcc0.ɵɵinject(PLATFORM_ID, 8)); };\nPlatform.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: Platform, factory: Platform.ɵfac, providedIn: 'root' });\n/** @nocollapse */\nPlatform.ctorParameters = () => [\n    { type: Object, decorators: [{ type: Optional }, { type: Inject, args: [PLATFORM_ID,] }] }\n];\n/** @nocollapse */ Platform.ngInjectableDef = ɵɵdefineInjectable({ factory: function Platform_Factory() { return new Platform(ɵɵinject(PLATFORM_ID, 8)); }, token: Platform, providedIn: \"root\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(Platform, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: Object, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [PLATFORM_ID]\n            }] }]; }, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass PlatformModule {\n}\nPlatformModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: PlatformModule });\nPlatformModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function PlatformModule_Factory(t) { return new (t || PlatformModule)(); } });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PlatformModule, [{\n        type: NgModule,\n        args: [{}]\n    }], null, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * Cached result Set of input types support by the current browser.\n * @type {?}\n */\nlet supportedInputTypes;\n/**\n * Types of `<input>` that *might* be supported.\n * @type {?}\n */\nconst candidateInputTypes = [\n    // `color` must come first. Chrome 56 shows a warning if we change the type to `color` after\n    // first changing it to something else:\n    // The specified value \"\" does not conform to the required format.\n    // The format is \"#rrggbb\" where rr, gg, bb are two-digit hexadecimal numbers.\n    'color',\n    'button',\n    'checkbox',\n    'date',\n    'datetime-local',\n    'email',\n    'file',\n    'hidden',\n    'image',\n    'month',\n    'number',\n    'password',\n    'radio',\n    'range',\n    'reset',\n    'search',\n    'submit',\n    'tel',\n    'text',\n    'time',\n    'url',\n    'week',\n];\n/**\n * @return {?} The input types supported by this browser.\n */\nfunction getSupportedInputTypes() {\n    // Result is cached.\n    if (supportedInputTypes) {\n        return supportedInputTypes;\n    }\n    // We can't check if an input type is not supported until we're on the browser, so say that\n    // everything is supported when not on the browser. We don't use `Platform` here since it's\n    // just a helper function and can't inject it.\n    if (typeof document !== 'object' || !document) {\n        supportedInputTypes = new Set(candidateInputTypes);\n        return supportedInputTypes;\n    }\n    /** @type {?} */\n    let featureTestInput = document.createElement('input');\n    supportedInputTypes = new Set(candidateInputTypes.filter((/**\n     * @param {?} value\n     * @return {?}\n     */\n    value => {\n        featureTestInput.setAttribute('type', value);\n        return featureTestInput.type === value;\n    })));\n    return supportedInputTypes;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * Cached result of whether the user's browser supports passive event listeners.\n * @type {?}\n */\nlet supportsPassiveEvents;\n/**\n * Checks whether the user's browser supports passive event listeners.\n * See: https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n * @return {?}\n */\nfunction supportsPassiveEventListeners() {\n    if (supportsPassiveEvents == null && typeof window !== 'undefined') {\n        try {\n            window.addEventListener('test', (/** @type {?} */ (null)), Object.defineProperty({}, 'passive', {\n                get: (/**\n                 * @return {?}\n                 */\n                () => supportsPassiveEvents = true)\n            }));\n        }\n        finally {\n            supportsPassiveEvents = supportsPassiveEvents || false;\n        }\n    }\n    return supportsPassiveEvents;\n}\n/**\n * Normalizes an `AddEventListener` object to something that can be passed\n * to `addEventListener` on any browser, no matter whether it supports the\n * `options` parameter.\n * @param {?} options Object to be normalized.\n * @return {?}\n */\nfunction normalizePassiveListenerOptions(options) {\n    return supportsPassiveEventListeners() ? options : !!options.capture;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @enum {number} */\nconst RtlScrollAxisType = {\n    /**\n     * scrollLeft is 0 when scrolled all the way left and (scrollWidth - clientWidth) when scrolled\n     * all the way right.\n     */\n    NORMAL: 0,\n    /**\n     * scrollLeft is -(scrollWidth - clientWidth) when scrolled all the way left and 0 when scrolled\n     * all the way right.\n     */\n    NEGATED: 1,\n    /**\n     * scrollLeft is (scrollWidth - clientWidth) when scrolled all the way left and 0 when scrolled\n     * all the way right.\n     */\n    INVERTED: 2,\n};\nRtlScrollAxisType[RtlScrollAxisType.NORMAL] = 'NORMAL';\nRtlScrollAxisType[RtlScrollAxisType.NEGATED] = 'NEGATED';\nRtlScrollAxisType[RtlScrollAxisType.INVERTED] = 'INVERTED';\n/**\n * Cached result of the way the browser handles the horizontal scroll axis in RTL mode.\n * @type {?}\n */\nlet rtlScrollAxisType;\n/**\n * Check whether the browser supports scroll behaviors.\n * @return {?}\n */\nfunction supportsScrollBehavior() {\n    return !!(typeof document == 'object' && 'scrollBehavior' in (/** @type {?} */ (document.documentElement)).style);\n}\n/**\n * Checks the type of RTL scroll axis used by this browser. As of time of writing, Chrome is NORMAL,\n * Firefox & Safari are NEGATED, and IE & Edge are INVERTED.\n * @return {?}\n */\nfunction getRtlScrollAxisType() {\n    // We can't check unless we're on the browser. Just assume 'normal' if we're not.\n    if (typeof document !== 'object' || !document) {\n        return RtlScrollAxisType.NORMAL;\n    }\n    if (!rtlScrollAxisType) {\n        // Create a 1px wide scrolling container and a 2px wide content element.\n        /** @type {?} */\n        const scrollContainer = document.createElement('div');\n        /** @type {?} */\n        const containerStyle = scrollContainer.style;\n        scrollContainer.dir = 'rtl';\n        containerStyle.height = '1px';\n        containerStyle.width = '1px';\n        containerStyle.overflow = 'auto';\n        containerStyle.visibility = 'hidden';\n        containerStyle.pointerEvents = 'none';\n        containerStyle.position = 'absolute';\n        /** @type {?} */\n        const content = document.createElement('div');\n        /** @type {?} */\n        const contentStyle = content.style;\n        contentStyle.width = '2px';\n        contentStyle.height = '1px';\n        scrollContainer.appendChild(content);\n        document.body.appendChild(scrollContainer);\n        rtlScrollAxisType = RtlScrollAxisType.NORMAL;\n        // The viewport starts scrolled all the way to the right in RTL mode. If we are in a NORMAL\n        // browser this would mean that the scrollLeft should be 1. If it's zero instead we know we're\n        // dealing with one of the other two types of browsers.\n        if (scrollContainer.scrollLeft === 0) {\n            // In a NEGATED browser the scrollLeft is always somewhere in [-maxScrollAmount, 0]. For an\n            // INVERTED browser it is always somewhere in [0, maxScrollAmount]. We can determine which by\n            // setting to the scrollLeft to 1. This is past the max for a NEGATED browser, so it will\n            // return 0 when we read it again.\n            scrollContainer.scrollLeft = 1;\n            rtlScrollAxisType =\n                scrollContainer.scrollLeft === 0 ? RtlScrollAxisType.NEGATED : RtlScrollAxisType.INVERTED;\n        }\n        (/** @type {?} */ (scrollContainer.parentNode)).removeChild(scrollContainer);\n    }\n    return rtlScrollAxisType;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @type {?} */\nlet shadowDomIsSupported;\n/**\n * Checks whether the user's browser support Shadow DOM.\n * @return {?}\n */\nfunction _supportsShadowDom() {\n    if (shadowDomIsSupported == null) {\n        /** @type {?} */\n        const head = typeof document !== 'undefined' ? document.head : null;\n        shadowDomIsSupported = !!(head && (((/** @type {?} */ (head))).createShadowRoot || head.attachShadow));\n    }\n    return shadowDomIsSupported;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { Platform, PlatformModule, getSupportedInputTypes, supportsPassiveEventListeners, normalizePassiveListenerOptions, supportsScrollBehavior, getRtlScrollAxisType, RtlScrollAxisType, _supportsShadowDom };\n\n//# sourceMappingURL=platform.js.map","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { InjectionToken, Directive, forwardRef, Input, Injectable, NgZone, Optional, SkipSelf, ElementRef, NgModule, IterableDiffers, TemplateRef, ViewContainerRef, ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject, Output, ViewChild, ViewEncapsulation, ɵɵdefineInjectable, ɵɵinject } from '@angular/core';\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\nimport { Subject, fromEvent, of, Observable, animationFrameScheduler, asapScheduler, merge } from 'rxjs';\nimport { distinctUntilChanged, auditTime, filter, takeUntil, startWith, pairwise, shareReplay, switchMap } from 'rxjs/operators';\nimport { Platform, getRtlScrollAxisType, RtlScrollAxisType, supportsScrollBehavior, PlatformModule } from '@angular/cdk/platform';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { ArrayDataSource, isDataSource } from '@angular/cdk/collections';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * The injection token used to specify the virtual scrolling strategy.\n * @type {?}\n */\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/cdk/platform';\nimport * as ɵngcc2 from '@angular/cdk/bidi';\n\nconst _c0 = [\"contentWrapper\"];\nconst _c1 = [\"*\"];\nconst VIRTUAL_SCROLL_STRATEGY = new InjectionToken('VIRTUAL_SCROLL_STRATEGY');\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Virtual scrolling strategy for lists with items of known fixed size.\n */\nclass FixedSizeVirtualScrollStrategy {\n    /**\n     * @param {?} itemSize The size of the items in the virtually scrolling list.\n     * @param {?} minBufferPx The minimum amount of buffer (in pixels) before needing to render more\n     * @param {?} maxBufferPx The amount of buffer (in pixels) to render when rendering more.\n     */\n    constructor(itemSize, minBufferPx, maxBufferPx) {\n        this._scrolledIndexChange = new Subject();\n        /**\n         * \\@docs-private Implemented as part of VirtualScrollStrategy.\n         */\n        this.scrolledIndexChange = this._scrolledIndexChange.pipe(distinctUntilChanged());\n        /**\n         * The attached viewport.\n         */\n        this._viewport = null;\n        this._itemSize = itemSize;\n        this._minBufferPx = minBufferPx;\n        this._maxBufferPx = maxBufferPx;\n    }\n    /**\n     * Attaches this scroll strategy to a viewport.\n     * @param {?} viewport The viewport to attach this strategy to.\n     * @return {?}\n     */\n    attach(viewport) {\n        this._viewport = viewport;\n        this._updateTotalContentSize();\n        this._updateRenderedRange();\n    }\n    /**\n     * Detaches this scroll strategy from the currently attached viewport.\n     * @return {?}\n     */\n    detach() {\n        this._scrolledIndexChange.complete();\n        this._viewport = null;\n    }\n    /**\n     * Update the item size and buffer size.\n     * @param {?} itemSize The size of the items in the virtually scrolling list.\n     * @param {?} minBufferPx The minimum amount of buffer (in pixels) before needing to render more\n     * @param {?} maxBufferPx The amount of buffer (in pixels) to render when rendering more.\n     * @return {?}\n     */\n    updateItemAndBufferSize(itemSize, minBufferPx, maxBufferPx) {\n        if (maxBufferPx < minBufferPx) {\n            throw Error('CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx');\n        }\n        this._itemSize = itemSize;\n        this._minBufferPx = minBufferPx;\n        this._maxBufferPx = maxBufferPx;\n        this._updateTotalContentSize();\n        this._updateRenderedRange();\n    }\n    /**\n     * \\@docs-private Implemented as part of VirtualScrollStrategy.\n     * @return {?}\n     */\n    onContentScrolled() {\n        this._updateRenderedRange();\n    }\n    /**\n     * \\@docs-private Implemented as part of VirtualScrollStrategy.\n     * @return {?}\n     */\n    onDataLengthChanged() {\n        this._updateTotalContentSize();\n        this._updateRenderedRange();\n    }\n    /**\n     * \\@docs-private Implemented as part of VirtualScrollStrategy.\n     * @return {?}\n     */\n    onContentRendered() { }\n    /**\n     * \\@docs-private Implemented as part of VirtualScrollStrategy.\n     * @return {?}\n     */\n    onRenderedOffsetChanged() { }\n    /**\n     * Scroll to the offset for the given index.\n     * @param {?} index The index of the element to scroll to.\n     * @param {?} behavior The ScrollBehavior to use when scrolling.\n     * @return {?}\n     */\n    scrollToIndex(index, behavior) {\n        if (this._viewport) {\n            this._viewport.scrollToOffset(index * this._itemSize, behavior);\n        }\n    }\n    /**\n     * Update the viewport's total content size.\n     * @private\n     * @return {?}\n     */\n    _updateTotalContentSize() {\n        if (!this._viewport) {\n            return;\n        }\n        this._viewport.setTotalContentSize(this._viewport.getDataLength() * this._itemSize);\n    }\n    /**\n     * Update the viewport's rendered range.\n     * @private\n     * @return {?}\n     */\n    _updateRenderedRange() {\n        if (!this._viewport) {\n            return;\n        }\n        /** @type {?} */\n        const scrollOffset = this._viewport.measureScrollOffset();\n        /** @type {?} */\n        const firstVisibleIndex = scrollOffset / this._itemSize;\n        /** @type {?} */\n        const renderedRange = this._viewport.getRenderedRange();\n        /** @type {?} */\n        const newRange = { start: renderedRange.start, end: renderedRange.end };\n        /** @type {?} */\n        const viewportSize = this._viewport.getViewportSize();\n        /** @type {?} */\n        const dataLength = this._viewport.getDataLength();\n        /** @type {?} */\n        const startBuffer = scrollOffset - newRange.start * this._itemSize;\n        if (startBuffer < this._minBufferPx && newRange.start != 0) {\n            /** @type {?} */\n            const expandStart = Math.ceil((this._maxBufferPx - startBuffer) / this._itemSize);\n            newRange.start = Math.max(0, newRange.start - expandStart);\n            newRange.end = Math.min(dataLength, Math.ceil(firstVisibleIndex + (viewportSize + this._minBufferPx) / this._itemSize));\n        }\n        else {\n            /** @type {?} */\n            const endBuffer = newRange.end * this._itemSize - (scrollOffset + viewportSize);\n            if (endBuffer < this._minBufferPx && newRange.end != dataLength) {\n                /** @type {?} */\n                const expandEnd = Math.ceil((this._maxBufferPx - endBuffer) / this._itemSize);\n                if (expandEnd > 0) {\n                    newRange.end = Math.min(dataLength, newRange.end + expandEnd);\n                    newRange.start = Math.max(0, Math.floor(firstVisibleIndex - this._minBufferPx / this._itemSize));\n                }\n            }\n        }\n        this._viewport.setRenderedRange(newRange);\n        this._viewport.setRenderedContentOffset(this._itemSize * newRange.start);\n        this._scrolledIndexChange.next(Math.floor(firstVisibleIndex));\n    }\n}\n/**\n * Provider factory for `FixedSizeVirtualScrollStrategy` that simply extracts the already created\n * `FixedSizeVirtualScrollStrategy` from the given directive.\n * @param {?} fixedSizeDir The instance of `CdkFixedSizeVirtualScroll` to extract the\n *     `FixedSizeVirtualScrollStrategy` from.\n * @return {?}\n */\nfunction _fixedSizeVirtualScrollStrategyFactory(fixedSizeDir) {\n    return fixedSizeDir._scrollStrategy;\n}\n/**\n * A virtual scroll strategy that supports fixed-size items.\n */\nclass CdkFixedSizeVirtualScroll {\n    constructor() {\n        this._itemSize = 20;\n        this._minBufferPx = 100;\n        this._maxBufferPx = 200;\n        /**\n         * The scroll strategy used by this directive.\n         */\n        this._scrollStrategy = new FixedSizeVirtualScrollStrategy(this.itemSize, this.minBufferPx, this.maxBufferPx);\n    }\n    /**\n     * The size of the items in the list (in pixels).\n     * @return {?}\n     */\n    get itemSize() { return this._itemSize; }\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n    set itemSize(value) { this._itemSize = coerceNumberProperty(value); }\n    /**\n     * The minimum amount of buffer rendered beyond the viewport (in pixels).\n     * If the amount of buffer dips below this number, more items will be rendered. Defaults to 100px.\n     * @return {?}\n     */\n    get minBufferPx() { return this._minBufferPx; }\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n    set minBufferPx(value) { this._minBufferPx = coerceNumberProperty(value); }\n    /**\n     * The number of pixels worth of buffer to render for when rendering new items. Defaults to 200px.\n     * @return {?}\n     */\n    get maxBufferPx() { return this._maxBufferPx; }\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n    set maxBufferPx(value) { this._maxBufferPx = coerceNumberProperty(value); }\n    /**\n     * @return {?}\n     */\n    ngOnChanges() {\n        this._scrollStrategy.updateItemAndBufferSize(this.itemSize, this.minBufferPx, this.maxBufferPx);\n    }\n}\nCdkFixedSizeVirtualScroll.ɵfac = function CdkFixedSizeVirtualScroll_Factory(t) { return new (t || CdkFixedSizeVirtualScroll)(); };\nCdkFixedSizeVirtualScroll.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: CdkFixedSizeVirtualScroll, selectors: [[\"cdk-virtual-scroll-viewport\", \"itemSize\", \"\"]], inputs: { itemSize: \"itemSize\", minBufferPx: \"minBufferPx\", maxBufferPx: \"maxBufferPx\" }, features: [ɵngcc0.ɵɵProvidersFeature([{\n                provide: VIRTUAL_SCROLL_STRATEGY,\n                useFactory: _fixedSizeVirtualScrollStrategyFactory,\n                deps: [forwardRef(( /**\n                         * @return {?}\n                         */() => CdkFixedSizeVirtualScroll))]\n            }]), ɵngcc0.ɵɵNgOnChangesFeature] });\nCdkFixedSizeVirtualScroll.propDecorators = {\n    itemSize: [{ type: Input }],\n    minBufferPx: [{ type: Input }],\n    maxBufferPx: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CdkFixedSizeVirtualScroll, [{\n        type: Directive,\n        args: [{\n                selector: 'cdk-virtual-scroll-viewport[itemSize]',\n                providers: [{\n                        provide: VIRTUAL_SCROLL_STRATEGY,\n                        useFactory: _fixedSizeVirtualScrollStrategyFactory,\n                        deps: [forwardRef(( /**\n                                 * @return {?}\n                                 */() => CdkFixedSizeVirtualScroll))]\n                    }]\n            }]\n    }], function () { return []; }, { itemSize: [{\n            type: Input\n        }], minBufferPx: [{\n            type: Input\n        }], maxBufferPx: [{\n            type: Input\n        }] }); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Time in ms to throttle the scrolling events by default.\n * @type {?}\n */\nconst DEFAULT_SCROLL_TIME = 20;\n/**\n * Service contained all registered Scrollable references and emits an event when any one of the\n * Scrollable references emit a scrolled event.\n */\nclass ScrollDispatcher {\n    /**\n     * @param {?} _ngZone\n     * @param {?} _platform\n     */\n    constructor(_ngZone, _platform) {\n        this._ngZone = _ngZone;\n        this._platform = _platform;\n        /**\n         * Subject for notifying that a registered scrollable reference element has been scrolled.\n         */\n        this._scrolled = new Subject();\n        /**\n         * Keeps track of the global `scroll` and `resize` subscriptions.\n         */\n        this._globalSubscription = null;\n        /**\n         * Keeps track of the amount of subscriptions to `scrolled`. Used for cleaning up afterwards.\n         */\n        this._scrolledCount = 0;\n        /**\n         * Map of all the scrollable references that are registered with the service and their\n         * scroll event subscriptions.\n         */\n        this.scrollContainers = new Map();\n    }\n    /**\n     * Registers a scrollable instance with the service and listens for its scrolled events. When the\n     * scrollable is scrolled, the service emits the event to its scrolled observable.\n     * @param {?} scrollable Scrollable instance to be registered.\n     * @return {?}\n     */\n    register(scrollable) {\n        if (!this.scrollContainers.has(scrollable)) {\n            this.scrollContainers.set(scrollable, scrollable.elementScrolled()\n                .subscribe((/**\n             * @return {?}\n             */\n            () => this._scrolled.next(scrollable))));\n        }\n    }\n    /**\n     * Deregisters a Scrollable reference and unsubscribes from its scroll event observable.\n     * @param {?} scrollable Scrollable instance to be deregistered.\n     * @return {?}\n     */\n    deregister(scrollable) {\n        /** @type {?} */\n        const scrollableReference = this.scrollContainers.get(scrollable);\n        if (scrollableReference) {\n            scrollableReference.unsubscribe();\n            this.scrollContainers.delete(scrollable);\n        }\n    }\n    /**\n     * Returns an observable that emits an event whenever any of the registered Scrollable\n     * references (or window, document, or body) fire a scrolled event. Can provide a time in ms\n     * to override the default \"throttle\" time.\n     *\n     * **Note:** in order to avoid hitting change detection for every scroll event,\n     * all of the events emitted from this stream will be run outside the Angular zone.\n     * If you need to update any data bindings as a result of a scroll event, you have\n     * to run the callback using `NgZone.run`.\n     * @param {?=} auditTimeInMs\n     * @return {?}\n     */\n    scrolled(auditTimeInMs = DEFAULT_SCROLL_TIME) {\n        if (!this._platform.isBrowser) {\n            return of();\n        }\n        return new Observable((/**\n         * @param {?} observer\n         * @return {?}\n         */\n        (observer) => {\n            if (!this._globalSubscription) {\n                this._addGlobalListener();\n            }\n            // In the case of a 0ms delay, use an observable without auditTime\n            // since it does add a perceptible delay in processing overhead.\n            /** @type {?} */\n            const subscription = auditTimeInMs > 0 ?\n                this._scrolled.pipe(auditTime(auditTimeInMs)).subscribe(observer) :\n                this._scrolled.subscribe(observer);\n            this._scrolledCount++;\n            return (/**\n             * @return {?}\n             */\n            () => {\n                subscription.unsubscribe();\n                this._scrolledCount--;\n                if (!this._scrolledCount) {\n                    this._removeGlobalListener();\n                }\n            });\n        }));\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this._removeGlobalListener();\n        this.scrollContainers.forEach((/**\n         * @param {?} _\n         * @param {?} container\n         * @return {?}\n         */\n        (_, container) => this.deregister(container)));\n        this._scrolled.complete();\n    }\n    /**\n     * Returns an observable that emits whenever any of the\n     * scrollable ancestors of an element are scrolled.\n     * @param {?} elementRef Element whose ancestors to listen for.\n     * @param {?=} auditTimeInMs Time to throttle the scroll events.\n     * @return {?}\n     */\n    ancestorScrolled(elementRef, auditTimeInMs) {\n        /** @type {?} */\n        const ancestors = this.getAncestorScrollContainers(elementRef);\n        return this.scrolled(auditTimeInMs).pipe(filter((/**\n         * @param {?} target\n         * @return {?}\n         */\n        target => {\n            return !target || ancestors.indexOf(target) > -1;\n        })));\n    }\n    /**\n     * Returns all registered Scrollables that contain the provided element.\n     * @param {?} elementRef\n     * @return {?}\n     */\n    getAncestorScrollContainers(elementRef) {\n        /** @type {?} */\n        const scrollingContainers = [];\n        this.scrollContainers.forEach((/**\n         * @param {?} _subscription\n         * @param {?} scrollable\n         * @return {?}\n         */\n        (_subscription, scrollable) => {\n            if (this._scrollableContainsElement(scrollable, elementRef)) {\n                scrollingContainers.push(scrollable);\n            }\n        }));\n        return scrollingContainers;\n    }\n    /**\n     * Returns true if the element is contained within the provided Scrollable.\n     * @private\n     * @param {?} scrollable\n     * @param {?} elementRef\n     * @return {?}\n     */\n    _scrollableContainsElement(scrollable, elementRef) {\n        /** @type {?} */\n        let element = elementRef.nativeElement;\n        /** @type {?} */\n        let scrollableElement = scrollable.getElementRef().nativeElement;\n        // Traverse through the element parents until we reach null, checking if any of the elements\n        // are the scrollable's element.\n        do {\n            if (element == scrollableElement) {\n                return true;\n            }\n        } while (element = (/** @type {?} */ (element)).parentElement);\n        return false;\n    }\n    /**\n     * Sets up the global scroll listeners.\n     * @private\n     * @return {?}\n     */\n    _addGlobalListener() {\n        this._globalSubscription = this._ngZone.runOutsideAngular((/**\n         * @return {?}\n         */\n        () => {\n            return fromEvent(window.document, 'scroll').subscribe((/**\n             * @return {?}\n             */\n            () => this._scrolled.next()));\n        }));\n    }\n    /**\n     * Cleans up the global scroll listener.\n     * @private\n     * @return {?}\n     */\n    _removeGlobalListener() {\n        if (this._globalSubscription) {\n            this._globalSubscription.unsubscribe();\n            this._globalSubscription = null;\n        }\n    }\n}\nScrollDispatcher.ɵfac = function ScrollDispatcher_Factory(t) { return new (t || ScrollDispatcher)(ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(ɵngcc1.Platform)); };\nScrollDispatcher.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ScrollDispatcher, factory: ScrollDispatcher.ɵfac, providedIn: 'root' });\n/** @nocollapse */\nScrollDispatcher.ctorParameters = () => [\n    { type: NgZone },\n    { type: Platform }\n];\n/** @nocollapse */ ScrollDispatcher.ngInjectableDef = ɵɵdefineInjectable({ factory: function ScrollDispatcher_Factory() { return new ScrollDispatcher(ɵɵinject(NgZone), ɵɵinject(Platform)); }, token: ScrollDispatcher, providedIn: \"root\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ScrollDispatcher, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: ɵngcc0.NgZone }, { type: ɵngcc1.Platform }]; }, null); })();\n/**\n * \\@docs-private \\@deprecated \\@breaking-change 8.0.0\n * @param {?} parentDispatcher\n * @param {?} ngZone\n * @param {?} platform\n * @return {?}\n */\nfunction SCROLL_DISPATCHER_PROVIDER_FACTORY(parentDispatcher, ngZone, platform) {\n    return parentDispatcher || new ScrollDispatcher(ngZone, platform);\n}\n/**\n * \\@docs-private \\@deprecated \\@breaking-change 8.0.0\n * @type {?}\n */\nconst SCROLL_DISPATCHER_PROVIDER = {\n    // If there is already a ScrollDispatcher available, use that. Otherwise, provide a new one.\n    provide: ScrollDispatcher,\n    deps: [[new Optional(), new SkipSelf(), ScrollDispatcher], NgZone, Platform],\n    useFactory: SCROLL_DISPATCHER_PROVIDER_FACTORY\n};\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Sends an event when the directive's element is scrolled. Registers itself with the\n * ScrollDispatcher service to include itself as part of its collection of scrolling events that it\n * can be listened to through the service.\n */\nclass CdkScrollable {\n    /**\n     * @param {?} elementRef\n     * @param {?} scrollDispatcher\n     * @param {?} ngZone\n     * @param {?=} dir\n     */\n    constructor(elementRef, scrollDispatcher, ngZone, dir) {\n        this.elementRef = elementRef;\n        this.scrollDispatcher = scrollDispatcher;\n        this.ngZone = ngZone;\n        this.dir = dir;\n        this._destroyed = new Subject();\n        this._elementScrolled = new Observable((/**\n         * @param {?} observer\n         * @return {?}\n         */\n        (observer) => this.ngZone.runOutsideAngular((/**\n         * @return {?}\n         */\n        () => fromEvent(this.elementRef.nativeElement, 'scroll').pipe(takeUntil(this._destroyed))\n            .subscribe(observer)))));\n    }\n    /**\n     * @return {?}\n     */\n    ngOnInit() {\n        this.scrollDispatcher.register(this);\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this.scrollDispatcher.deregister(this);\n        this._destroyed.next();\n        this._destroyed.complete();\n    }\n    /**\n     * Returns observable that emits when a scroll event is fired on the host element.\n     * @return {?}\n     */\n    elementScrolled() {\n        return this._elementScrolled;\n    }\n    /**\n     * Gets the ElementRef for the viewport.\n     * @return {?}\n     */\n    getElementRef() {\n        return this.elementRef;\n    }\n    /**\n     * Scrolls to the specified offsets. This is a normalized version of the browser's native scrollTo\n     * method, since browsers are not consistent about what scrollLeft means in RTL. For this method\n     * left and right always refer to the left and right side of the scrolling container irrespective\n     * of the layout direction. start and end refer to left and right in an LTR context and vice-versa\n     * in an RTL context.\n     * @param {?} options specified the offsets to scroll to.\n     * @return {?}\n     */\n    scrollTo(options) {\n        /** @type {?} */\n        const el = this.elementRef.nativeElement;\n        /** @type {?} */\n        const isRtl = this.dir && this.dir.value == 'rtl';\n        // Rewrite start & end offsets as right or left offsets.\n        options.left = options.left == null ? (isRtl ? options.end : options.start) : options.left;\n        options.right = options.right == null ? (isRtl ? options.start : options.end) : options.right;\n        // Rewrite the bottom offset as a top offset.\n        if (options.bottom != null) {\n            ((/** @type {?} */ (options))).top =\n                el.scrollHeight - el.clientHeight - options.bottom;\n        }\n        // Rewrite the right offset as a left offset.\n        if (isRtl && getRtlScrollAxisType() != RtlScrollAxisType.NORMAL) {\n            if (options.left != null) {\n                ((/** @type {?} */ (options))).right =\n                    el.scrollWidth - el.clientWidth - options.left;\n            }\n            if (getRtlScrollAxisType() == RtlScrollAxisType.INVERTED) {\n                options.left = options.right;\n            }\n            else if (getRtlScrollAxisType() == RtlScrollAxisType.NEGATED) {\n                options.left = options.right ? -options.right : options.right;\n            }\n        }\n        else {\n            if (options.right != null) {\n                ((/** @type {?} */ (options))).left =\n                    el.scrollWidth - el.clientWidth - options.right;\n            }\n        }\n        this._applyScrollToOptions(options);\n    }\n    /**\n     * @private\n     * @param {?} options\n     * @return {?}\n     */\n    _applyScrollToOptions(options) {\n        /** @type {?} */\n        const el = this.elementRef.nativeElement;\n        if (supportsScrollBehavior()) {\n            el.scrollTo(options);\n        }\n        else {\n            if (options.top != null) {\n                el.scrollTop = options.top;\n            }\n            if (options.left != null) {\n                el.scrollLeft = options.left;\n            }\n        }\n    }\n    /**\n     * Measures the scroll offset relative to the specified edge of the viewport. This method can be\n     * used instead of directly checking scrollLeft or scrollTop, since browsers are not consistent\n     * about what scrollLeft means in RTL. The values returned by this method are normalized such that\n     * left and right always refer to the left and right side of the scrolling container irrespective\n     * of the layout direction. start and end refer to left and right in an LTR context and vice-versa\n     * in an RTL context.\n     * @param {?} from The edge to measure from.\n     * @return {?}\n     */\n    measureScrollOffset(from) {\n        /** @type {?} */\n        const LEFT = 'left';\n        /** @type {?} */\n        const RIGHT = 'right';\n        /** @type {?} */\n        const el = this.elementRef.nativeElement;\n        if (from == 'top') {\n            return el.scrollTop;\n        }\n        if (from == 'bottom') {\n            return el.scrollHeight - el.clientHeight - el.scrollTop;\n        }\n        // Rewrite start & end as left or right offsets.\n        /** @type {?} */\n        const isRtl = this.dir && this.dir.value == 'rtl';\n        if (from == 'start') {\n            from = isRtl ? RIGHT : LEFT;\n        }\n        else if (from == 'end') {\n            from = isRtl ? LEFT : RIGHT;\n        }\n        if (isRtl && getRtlScrollAxisType() == RtlScrollAxisType.INVERTED) {\n            // For INVERTED, scrollLeft is (scrollWidth - clientWidth) when scrolled all the way left and\n            // 0 when scrolled all the way right.\n            if (from == LEFT) {\n                return el.scrollWidth - el.clientWidth - el.scrollLeft;\n            }\n            else {\n                return el.scrollLeft;\n            }\n        }\n        else if (isRtl && getRtlScrollAxisType() == RtlScrollAxisType.NEGATED) {\n            // For NEGATED, scrollLeft is -(scrollWidth - clientWidth) when scrolled all the way left and\n            // 0 when scrolled all the way right.\n            if (from == LEFT) {\n                return el.scrollLeft + el.scrollWidth - el.clientWidth;\n            }\n            else {\n                return -el.scrollLeft;\n            }\n        }\n        else {\n            // For NORMAL, as well as non-RTL contexts, scrollLeft is 0 when scrolled all the way left and\n            // (scrollWidth - clientWidth) when scrolled all the way right.\n            if (from == LEFT) {\n                return el.scrollLeft;\n            }\n            else {\n                return el.scrollWidth - el.clientWidth - el.scrollLeft;\n            }\n        }\n    }\n}\nCdkScrollable.ɵfac = function CdkScrollable_Factory(t) { return new (t || CdkScrollable)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ScrollDispatcher), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.Directionality, 8)); };\nCdkScrollable.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: CdkScrollable, selectors: [[\"\", \"cdk-scrollable\", \"\"], [\"\", \"cdkScrollable\", \"\"]] });\n/** @nocollapse */\nCdkScrollable.ctorParameters = () => [\n    { type: ElementRef },\n    { type: ScrollDispatcher },\n    { type: NgZone },\n    { type: Directionality, decorators: [{ type: Optional }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CdkScrollable, [{\n        type: Directive,\n        args: [{\n                selector: '[cdk-scrollable], [cdkScrollable]'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ScrollDispatcher }, { type: ɵngcc0.NgZone }, { type: ɵngcc2.Directionality, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Checks if the given ranges are equal.\n * @param {?} r1\n * @param {?} r2\n * @return {?}\n */\nfunction rangesEqual(r1, r2) {\n    return r1.start == r2.start && r1.end == r2.end;\n}\n/**\n * Scheduler to be used for scroll events. Needs to fall back to\n * something that doesn't rely on requestAnimationFrame on environments\n * that don't support it (e.g. server-side rendering).\n * @type {?}\n */\nconst SCROLL_SCHEDULER = typeof requestAnimationFrame !== 'undefined' ? animationFrameScheduler : asapScheduler;\n/**\n * A viewport that virtualizes its scrolling with the help of `CdkVirtualForOf`.\n */\nclass CdkVirtualScrollViewport extends CdkScrollable {\n    /**\n     * @param {?} elementRef\n     * @param {?} _changeDetectorRef\n     * @param {?} ngZone\n     * @param {?} _scrollStrategy\n     * @param {?} dir\n     * @param {?} scrollDispatcher\n     */\n    constructor(elementRef, _changeDetectorRef, ngZone, _scrollStrategy, dir, scrollDispatcher) {\n        super(elementRef, scrollDispatcher, ngZone, dir);\n        this.elementRef = elementRef;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._scrollStrategy = _scrollStrategy;\n        /**\n         * Emits when the viewport is detached from a CdkVirtualForOf.\n         */\n        this._detachedSubject = new Subject();\n        /**\n         * Emits when the rendered range changes.\n         */\n        this._renderedRangeSubject = new Subject();\n        this._orientation = 'vertical';\n        // Note: we don't use the typical EventEmitter here because we need to subscribe to the scroll\n        // strategy lazily (i.e. only if the user is actually listening to the events). We do this because\n        // depending on how the strategy calculates the scrolled index, it may come at a cost to\n        // performance.\n        /**\n         * Emits when the index of the first element visible in the viewport changes.\n         */\n        this.scrolledIndexChange = new Observable((/**\n         * @param {?} observer\n         * @return {?}\n         */\n        (observer) => this._scrollStrategy.scrolledIndexChange.subscribe((/**\n         * @param {?} index\n         * @return {?}\n         */\n        index => Promise.resolve().then((/**\n         * @return {?}\n         */\n        () => this.ngZone.run((/**\n         * @return {?}\n         */\n        () => observer.next(index)))))))));\n        /**\n         * A stream that emits whenever the rendered range changes.\n         */\n        this.renderedRangeStream = this._renderedRangeSubject.asObservable();\n        /**\n         * The total size of all content (in pixels), including content that is not currently rendered.\n         */\n        this._totalContentSize = 0;\n        /**\n         * A string representing the `style.width` property value to be used for the spacer element.\n         */\n        this._totalContentWidth = '';\n        /**\n         * A string representing the `style.height` property value to be used for the spacer element.\n         */\n        this._totalContentHeight = '';\n        /**\n         * The currently rendered range of indices.\n         */\n        this._renderedRange = { start: 0, end: 0 };\n        /**\n         * The length of the data bound to this viewport (in number of items).\n         */\n        this._dataLength = 0;\n        /**\n         * The size of the viewport (in pixels).\n         */\n        this._viewportSize = 0;\n        /**\n         * The last rendered content offset that was set.\n         */\n        this._renderedContentOffset = 0;\n        /**\n         * Whether the last rendered content offset was to the end of the content (and therefore needs to\n         * be rewritten as an offset to the start of the content).\n         */\n        this._renderedContentOffsetNeedsRewrite = false;\n        /**\n         * Whether there is a pending change detection cycle.\n         */\n        this._isChangeDetectionPending = false;\n        /**\n         * A list of functions to run after the next change detection cycle.\n         */\n        this._runAfterChangeDetection = [];\n        if (!_scrollStrategy) {\n            throw Error('Error: cdk-virtual-scroll-viewport requires the \"itemSize\" property to be set.');\n        }\n    }\n    /**\n     * The direction the viewport scrolls.\n     * @return {?}\n     */\n    get orientation() {\n        return this._orientation;\n    }\n    /**\n     * @param {?} orientation\n     * @return {?}\n     */\n    set orientation(orientation) {\n        if (this._orientation !== orientation) {\n            this._orientation = orientation;\n            this._calculateSpacerSize();\n        }\n    }\n    /**\n     * @return {?}\n     */\n    ngOnInit() {\n        super.ngOnInit();\n        // It's still too early to measure the viewport at this point. Deferring with a promise allows\n        // the Viewport to be rendered with the correct size before we measure. We run this outside the\n        // zone to avoid causing more change detection cycles. We handle the change detection loop\n        // ourselves instead.\n        this.ngZone.runOutsideAngular((/**\n         * @return {?}\n         */\n        () => Promise.resolve().then((/**\n         * @return {?}\n         */\n        () => {\n            this._measureViewportSize();\n            this._scrollStrategy.attach(this);\n            this.elementScrolled()\n                .pipe(\n            // Start off with a fake scroll event so we properly detect our initial position.\n            startWith((/** @type {?} */ (null))), \n            // Collect multiple events into one until the next animation frame. This way if\n            // there are multiple scroll events in the same frame we only need to recheck\n            // our layout once.\n            auditTime(0, SCROLL_SCHEDULER))\n                .subscribe((/**\n             * @return {?}\n             */\n            () => this._scrollStrategy.onContentScrolled()));\n            this._markChangeDetectionNeeded();\n        }))));\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this.detach();\n        this._scrollStrategy.detach();\n        // Complete all subjects\n        this._renderedRangeSubject.complete();\n        this._detachedSubject.complete();\n        super.ngOnDestroy();\n    }\n    /**\n     * Attaches a `CdkVirtualForOf` to this viewport.\n     * @param {?} forOf\n     * @return {?}\n     */\n    attach(forOf) {\n        if (this._forOf) {\n            throw Error('CdkVirtualScrollViewport is already attached.');\n        }\n        // Subscribe to the data stream of the CdkVirtualForOf to keep track of when the data length\n        // changes. Run outside the zone to avoid triggering change detection, since we're managing the\n        // change detection loop ourselves.\n        this.ngZone.runOutsideAngular((/**\n         * @return {?}\n         */\n        () => {\n            this._forOf = forOf;\n            this._forOf.dataStream.pipe(takeUntil(this._detachedSubject)).subscribe((/**\n             * @param {?} data\n             * @return {?}\n             */\n            data => {\n                /** @type {?} */\n                const newLength = data.length;\n                if (newLength !== this._dataLength) {\n                    this._dataLength = newLength;\n                    this._scrollStrategy.onDataLengthChanged();\n                }\n                this._doChangeDetection();\n            }));\n        }));\n    }\n    /**\n     * Detaches the current `CdkVirtualForOf`.\n     * @return {?}\n     */\n    detach() {\n        this._forOf = null;\n        this._detachedSubject.next();\n    }\n    /**\n     * Gets the length of the data bound to this viewport (in number of items).\n     * @return {?}\n     */\n    getDataLength() {\n        return this._dataLength;\n    }\n    /**\n     * Gets the size of the viewport (in pixels).\n     * @return {?}\n     */\n    getViewportSize() {\n        return this._viewportSize;\n    }\n    // TODO(mmalerba): This is technically out of sync with what's really rendered until a render\n    // cycle happens. I'm being careful to only call it after the render cycle is complete and before\n    // setting it to something else, but its error prone and should probably be split into\n    // `pendingRange` and `renderedRange`, the latter reflecting whats actually in the DOM.\n    /**\n     * Get the current rendered range of items.\n     * @return {?}\n     */\n    getRenderedRange() {\n        return this._renderedRange;\n    }\n    /**\n     * Sets the total size of all content (in pixels), including content that is not currently\n     * rendered.\n     * @param {?} size\n     * @return {?}\n     */\n    setTotalContentSize(size) {\n        if (this._totalContentSize !== size) {\n            this._totalContentSize = size;\n            this._calculateSpacerSize();\n            this._markChangeDetectionNeeded();\n        }\n    }\n    /**\n     * Sets the currently rendered range of indices.\n     * @param {?} range\n     * @return {?}\n     */\n    setRenderedRange(range) {\n        if (!rangesEqual(this._renderedRange, range)) {\n            this._renderedRangeSubject.next(this._renderedRange = range);\n            this._markChangeDetectionNeeded((/**\n             * @return {?}\n             */\n            () => this._scrollStrategy.onContentRendered()));\n        }\n    }\n    /**\n     * Gets the offset from the start of the viewport to the start of the rendered data (in pixels).\n     * @return {?}\n     */\n    getOffsetToRenderedContentStart() {\n        return this._renderedContentOffsetNeedsRewrite ? null : this._renderedContentOffset;\n    }\n    /**\n     * Sets the offset from the start of the viewport to either the start or end of the rendered data\n     * (in pixels).\n     * @param {?} offset\n     * @param {?=} to\n     * @return {?}\n     */\n    setRenderedContentOffset(offset, to = 'to-start') {\n        // For a horizontal viewport in a right-to-left language we need to translate along the x-axis\n        // in the negative direction.\n        /** @type {?} */\n        const isRtl = this.dir && this.dir.value == 'rtl';\n        /** @type {?} */\n        const isHorizontal = this.orientation == 'horizontal';\n        /** @type {?} */\n        const axis = isHorizontal ? 'X' : 'Y';\n        /** @type {?} */\n        const axisDirection = isHorizontal && isRtl ? -1 : 1;\n        /** @type {?} */\n        let transform = `translate${axis}(${Number(axisDirection * offset)}px)`;\n        this._renderedContentOffset = offset;\n        if (to === 'to-end') {\n            transform += ` translate${axis}(-100%)`;\n            // The viewport should rewrite this as a `to-start` offset on the next render cycle. Otherwise\n            // elements will appear to expand in the wrong direction (e.g. `mat-expansion-panel` would\n            // expand upward).\n            this._renderedContentOffsetNeedsRewrite = true;\n        }\n        if (this._renderedContentTransform != transform) {\n            // We know this value is safe because we parse `offset` with `Number()` before passing it\n            // into the string.\n            this._renderedContentTransform = transform;\n            this._markChangeDetectionNeeded((/**\n             * @return {?}\n             */\n            () => {\n                if (this._renderedContentOffsetNeedsRewrite) {\n                    this._renderedContentOffset -= this.measureRenderedContentSize();\n                    this._renderedContentOffsetNeedsRewrite = false;\n                    this.setRenderedContentOffset(this._renderedContentOffset);\n                }\n                else {\n                    this._scrollStrategy.onRenderedOffsetChanged();\n                }\n            }));\n        }\n    }\n    /**\n     * Scrolls to the given offset from the start of the viewport. Please note that this is not always\n     * the same as setting `scrollTop` or `scrollLeft`. In a horizontal viewport with right-to-left\n     * direction, this would be the equivalent of setting a fictional `scrollRight` property.\n     * @param {?} offset The offset to scroll to.\n     * @param {?=} behavior The ScrollBehavior to use when scrolling. Default is behavior is `auto`.\n     * @return {?}\n     */\n    scrollToOffset(offset, behavior = 'auto') {\n        /** @type {?} */\n        const options = { behavior };\n        if (this.orientation === 'horizontal') {\n            options.start = offset;\n        }\n        else {\n            options.top = offset;\n        }\n        this.scrollTo(options);\n    }\n    /**\n     * Scrolls to the offset for the given index.\n     * @param {?} index The index of the element to scroll to.\n     * @param {?=} behavior The ScrollBehavior to use when scrolling. Default is behavior is `auto`.\n     * @return {?}\n     */\n    scrollToIndex(index, behavior = 'auto') {\n        this._scrollStrategy.scrollToIndex(index, behavior);\n    }\n    /**\n     * Gets the current scroll offset from the start of the viewport (in pixels).\n     * @param {?=} from The edge to measure the offset from. Defaults to 'top' in vertical mode and 'start'\n     *     in horizontal mode.\n     * @return {?}\n     */\n    measureScrollOffset(from) {\n        return super.measureScrollOffset(from ? from : this.orientation === 'horizontal' ? 'start' : 'top');\n    }\n    /**\n     * Measure the combined size of all of the rendered items.\n     * @return {?}\n     */\n    measureRenderedContentSize() {\n        /** @type {?} */\n        const contentEl = this._contentWrapper.nativeElement;\n        return this.orientation === 'horizontal' ? contentEl.offsetWidth : contentEl.offsetHeight;\n    }\n    /**\n     * Measure the total combined size of the given range. Throws if the range includes items that are\n     * not rendered.\n     * @param {?} range\n     * @return {?}\n     */\n    measureRangeSize(range) {\n        if (!this._forOf) {\n            return 0;\n        }\n        return this._forOf.measureRangeSize(range, this.orientation);\n    }\n    /**\n     * Update the viewport dimensions and re-render.\n     * @return {?}\n     */\n    checkViewportSize() {\n        // TODO: Cleanup later when add logic for handling content resize\n        this._measureViewportSize();\n        this._scrollStrategy.onDataLengthChanged();\n    }\n    /**\n     * Measure the viewport size.\n     * @private\n     * @return {?}\n     */\n    _measureViewportSize() {\n        /** @type {?} */\n        const viewportEl = this.elementRef.nativeElement;\n        this._viewportSize = this.orientation === 'horizontal' ?\n            viewportEl.clientWidth : viewportEl.clientHeight;\n    }\n    /**\n     * Queue up change detection to run.\n     * @private\n     * @param {?=} runAfter\n     * @return {?}\n     */\n    _markChangeDetectionNeeded(runAfter) {\n        if (runAfter) {\n            this._runAfterChangeDetection.push(runAfter);\n        }\n        // Use a Promise to batch together calls to `_doChangeDetection`. This way if we set a bunch of\n        // properties sequentially we only have to run `_doChangeDetection` once at the end.\n        if (!this._isChangeDetectionPending) {\n            this._isChangeDetectionPending = true;\n            this.ngZone.runOutsideAngular((/**\n             * @return {?}\n             */\n            () => Promise.resolve().then((/**\n             * @return {?}\n             */\n            () => {\n                this._doChangeDetection();\n            }))));\n        }\n    }\n    /**\n     * Run change detection.\n     * @private\n     * @return {?}\n     */\n    _doChangeDetection() {\n        this._isChangeDetectionPending = false;\n        // Apply changes to Angular bindings. Note: We must call `markForCheck` to run change detection\n        // from the root, since the repeated items are content projected in. Calling `detectChanges`\n        // instead does not properly check the projected content.\n        this.ngZone.run((/**\n         * @return {?}\n         */\n        () => this._changeDetectorRef.markForCheck()));\n        // Apply the content transform. The transform can't be set via an Angular binding because\n        // bypassSecurityTrustStyle is banned in Google. However the value is safe, it's composed of\n        // string literals, a variable that can only be 'X' or 'Y', and user input that is run through\n        // the `Number` function first to coerce it to a numeric value.\n        this._contentWrapper.nativeElement.style.transform = this._renderedContentTransform;\n        /** @type {?} */\n        const runAfterChangeDetection = this._runAfterChangeDetection;\n        this._runAfterChangeDetection = [];\n        for (const fn of runAfterChangeDetection) {\n            fn();\n        }\n    }\n    /**\n     * Calculates the `style.width` and `style.height` for the spacer element.\n     * @private\n     * @return {?}\n     */\n    _calculateSpacerSize() {\n        this._totalContentHeight =\n            this.orientation === 'horizontal' ? '' : `${this._totalContentSize}px`;\n        this._totalContentWidth =\n            this.orientation === 'horizontal' ? `${this._totalContentSize}px` : '';\n    }\n}\nCdkVirtualScrollViewport.ɵfac = function CdkVirtualScrollViewport_Factory(t) { return new (t || CdkVirtualScrollViewport)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(VIRTUAL_SCROLL_STRATEGY, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.Directionality, 8), ɵngcc0.ɵɵdirectiveInject(ScrollDispatcher)); };\nCdkVirtualScrollViewport.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CdkVirtualScrollViewport, selectors: [[\"cdk-virtual-scroll-viewport\"]], viewQuery: function CdkVirtualScrollViewport_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c0, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._contentWrapper = _t.first);\n    } }, hostAttrs: [1, \"cdk-virtual-scroll-viewport\"], hostVars: 4, hostBindings: function CdkVirtualScrollViewport_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"cdk-virtual-scroll-orientation-horizontal\", ctx.orientation === \"horizontal\")(\"cdk-virtual-scroll-orientation-vertical\", ctx.orientation !== \"horizontal\");\n    } }, inputs: { orientation: \"orientation\" }, outputs: { scrolledIndexChange: \"scrolledIndexChange\" }, features: [ɵngcc0.ɵɵProvidersFeature([{\n                provide: CdkScrollable,\n                useExisting: CdkVirtualScrollViewport\n            }]), ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 4, vars: 4, consts: [[1, \"cdk-virtual-scroll-content-wrapper\"], [\"contentWrapper\", \"\"], [1, \"cdk-virtual-scroll-spacer\"]], template: function CdkVirtualScrollViewport_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0, 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(3, \"div\", 2);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵstyleProp(\"width\", ctx._totalContentWidth)(\"height\", ctx._totalContentHeight);\n    } }, styles: [\"cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:0}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:0}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\"], encapsulation: 2, changeDetection: 0 });\n/** @nocollapse */\nCdkVirtualScrollViewport.ctorParameters = () => [\n    { type: ElementRef },\n    { type: ChangeDetectorRef },\n    { type: NgZone },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [VIRTUAL_SCROLL_STRATEGY,] }] },\n    { type: Directionality, decorators: [{ type: Optional }] },\n    { type: ScrollDispatcher }\n];\nCdkVirtualScrollViewport.propDecorators = {\n    orientation: [{ type: Input }],\n    scrolledIndexChange: [{ type: Output }],\n    _contentWrapper: [{ type: ViewChild, args: ['contentWrapper', { static: true },] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CdkVirtualScrollViewport, [{\n        type: Component,\n        args: [{ selector: 'cdk-virtual-scroll-viewport',\n                template: \"<div #contentWrapper class=\\\"cdk-virtual-scroll-content-wrapper\\\"><ng-content></ng-content></div><div class=\\\"cdk-virtual-scroll-spacer\\\" [style.width]=\\\"_totalContentWidth\\\" [style.height]=\\\"_totalContentHeight\\\"></div>\",\n                styles: [\"cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:0}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:0}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\"],\n                host: {\n                    'class': 'cdk-virtual-scroll-viewport',\n                    '[class.cdk-virtual-scroll-orientation-horizontal]': 'orientation === \"horizontal\"',\n                    '[class.cdk-virtual-scroll-orientation-vertical]': 'orientation !== \"horizontal\"'\n                },\n                encapsulation: ViewEncapsulation.None,\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                providers: [{\n                        provide: CdkScrollable,\n                        useExisting: CdkVirtualScrollViewport\n                    }]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.NgZone }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [VIRTUAL_SCROLL_STRATEGY]\n            }] }, { type: ɵngcc2.Directionality, decorators: [{\n                type: Optional\n            }] }, { type: ScrollDispatcher }]; }, { scrolledIndexChange: [{\n            type: Output\n        }], orientation: [{\n            type: Input\n        }], _contentWrapper: [{\n            type: ViewChild,\n            args: ['contentWrapper', { static: true }]\n        }] }); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Helper to extract size from a DOM Node.\n * @param {?} orientation\n * @param {?} node\n * @return {?}\n */\nfunction getSize(orientation, node) {\n    /** @type {?} */\n    const el = (/** @type {?} */ (node));\n    if (!el.getBoundingClientRect) {\n        return 0;\n    }\n    /** @type {?} */\n    const rect = el.getBoundingClientRect();\n    return orientation == 'horizontal' ? rect.width : rect.height;\n}\n/**\n * A directive similar to `ngForOf` to be used for rendering data inside a virtual scrolling\n * container.\n * @template T\n */\nclass CdkVirtualForOf {\n    /**\n     * @param {?} _viewContainerRef\n     * @param {?} _template\n     * @param {?} _differs\n     * @param {?} _viewport\n     * @param {?} ngZone\n     */\n    constructor(_viewContainerRef, _template, _differs, _viewport, ngZone) {\n        this._viewContainerRef = _viewContainerRef;\n        this._template = _template;\n        this._differs = _differs;\n        this._viewport = _viewport;\n        /**\n         * Emits when the rendered view of the data changes.\n         */\n        this.viewChange = new Subject();\n        /**\n         * Subject that emits when a new DataSource instance is given.\n         */\n        this._dataSourceChanges = new Subject();\n        /**\n         * The size of the cache used to store templates that are not being used for re-use later.\n         * Setting the cache size to `0` will disable caching. Defaults to 20 templates.\n         */\n        this.cdkVirtualForTemplateCacheSize = 20;\n        /**\n         * Emits whenever the data in the current DataSource changes.\n         */\n        this.dataStream = this._dataSourceChanges\n            .pipe(\n        // Start off with null `DataSource`.\n        startWith((/** @type {?} */ (null))), \n        // Bundle up the previous and current data sources so we can work with both.\n        pairwise(), \n        // Use `_changeDataSource` to disconnect from the previous data source and connect to the\n        // new one, passing back a stream of data changes which we run through `switchMap` to give\n        // us a data stream that emits the latest data from whatever the current `DataSource` is.\n        switchMap((/**\n         * @param {?} __0\n         * @return {?}\n         */\n        ([prev, cur]) => this._changeDataSource(prev, cur))), \n        // Replay the last emitted data when someone subscribes.\n        shareReplay(1));\n        /**\n         * The differ used to calculate changes to the data.\n         */\n        this._differ = null;\n        /**\n         * The template cache used to hold on ot template instancess that have been stamped out, but don't\n         * currently need to be rendered. These instances will be reused in the future rather than\n         * stamping out brand new ones.\n         */\n        this._templateCache = [];\n        /**\n         * Whether the rendered data should be updated during the next ngDoCheck cycle.\n         */\n        this._needsUpdate = false;\n        this._destroyed = new Subject();\n        this.dataStream.subscribe((/**\n         * @param {?} data\n         * @return {?}\n         */\n        data => {\n            this._data = data;\n            this._onRenderedDataChange();\n        }));\n        this._viewport.renderedRangeStream.pipe(takeUntil(this._destroyed)).subscribe((/**\n         * @param {?} range\n         * @return {?}\n         */\n        range => {\n            this._renderedRange = range;\n            ngZone.run((/**\n             * @return {?}\n             */\n            () => this.viewChange.next(this._renderedRange)));\n            this._onRenderedDataChange();\n        }));\n        this._viewport.attach(this);\n    }\n    /**\n     * The DataSource to display.\n     * @return {?}\n     */\n    get cdkVirtualForOf() {\n        return this._cdkVirtualForOf;\n    }\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n    set cdkVirtualForOf(value) {\n        this._cdkVirtualForOf = value;\n        /** @type {?} */\n        const ds = isDataSource(value) ? value :\n            // Slice the value if its an NgIterable to ensure we're working with an array.\n            new ArrayDataSource(value instanceof Observable ? value : Array.prototype.slice.call(value || []));\n        this._dataSourceChanges.next(ds);\n    }\n    /**\n     * The `TrackByFunction` to use for tracking changes. The `TrackByFunction` takes the index and\n     * the item and produces a value to be used as the item's identity when tracking changes.\n     * @return {?}\n     */\n    get cdkVirtualForTrackBy() {\n        return this._cdkVirtualForTrackBy;\n    }\n    /**\n     * @param {?} fn\n     * @return {?}\n     */\n    set cdkVirtualForTrackBy(fn) {\n        this._needsUpdate = true;\n        this._cdkVirtualForTrackBy = fn ?\n            (/**\n             * @param {?} index\n             * @param {?} item\n             * @return {?}\n             */\n            (index, item) => fn(index + (this._renderedRange ? this._renderedRange.start : 0), item)) :\n            undefined;\n    }\n    /**\n     * The template used to stamp out new elements.\n     * @param {?} value\n     * @return {?}\n     */\n    set cdkVirtualForTemplate(value) {\n        if (value) {\n            this._needsUpdate = true;\n            this._template = value;\n        }\n    }\n    /**\n     * Measures the combined size (width for horizontal orientation, height for vertical) of all items\n     * in the specified range. Throws an error if the range includes items that are not currently\n     * rendered.\n     * @param {?} range\n     * @param {?} orientation\n     * @return {?}\n     */\n    measureRangeSize(range, orientation) {\n        if (range.start >= range.end) {\n            return 0;\n        }\n        if (range.start < this._renderedRange.start || range.end > this._renderedRange.end) {\n            throw Error(`Error: attempted to measure an item that isn't rendered.`);\n        }\n        // The index into the list of rendered views for the first item in the range.\n        /** @type {?} */\n        const renderedStartIndex = range.start - this._renderedRange.start;\n        // The length of the range we're measuring.\n        /** @type {?} */\n        const rangeLen = range.end - range.start;\n        // Loop over all root nodes for all items in the range and sum up their size.\n        /** @type {?} */\n        let totalSize = 0;\n        /** @type {?} */\n        let i = rangeLen;\n        while (i--) {\n            /** @type {?} */\n            const view = (/** @type {?} */ (this._viewContainerRef.get(i + renderedStartIndex)));\n            /** @type {?} */\n            let j = view ? view.rootNodes.length : 0;\n            while (j--) {\n                totalSize += getSize(orientation, (/** @type {?} */ (view)).rootNodes[j]);\n            }\n        }\n        return totalSize;\n    }\n    /**\n     * @return {?}\n     */\n    ngDoCheck() {\n        if (this._differ && this._needsUpdate) {\n            // TODO(mmalerba): We should differentiate needs update due to scrolling and a new portion of\n            // this list being rendered (can use simpler algorithm) vs needs update due to data actually\n            // changing (need to do this diff).\n            /** @type {?} */\n            const changes = this._differ.diff(this._renderedItems);\n            if (!changes) {\n                this._updateContext();\n            }\n            else {\n                this._applyChanges(changes);\n            }\n            this._needsUpdate = false;\n        }\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this._viewport.detach();\n        this._dataSourceChanges.next();\n        this._dataSourceChanges.complete();\n        this.viewChange.complete();\n        this._destroyed.next();\n        this._destroyed.complete();\n        for (let view of this._templateCache) {\n            view.destroy();\n        }\n    }\n    /**\n     * React to scroll state changes in the viewport.\n     * @private\n     * @return {?}\n     */\n    _onRenderedDataChange() {\n        if (!this._renderedRange) {\n            return;\n        }\n        this._renderedItems = this._data.slice(this._renderedRange.start, this._renderedRange.end);\n        if (!this._differ) {\n            this._differ = this._differs.find(this._renderedItems).create(this.cdkVirtualForTrackBy);\n        }\n        this._needsUpdate = true;\n    }\n    /**\n     * Swap out one `DataSource` for another.\n     * @private\n     * @param {?} oldDs\n     * @param {?} newDs\n     * @return {?}\n     */\n    _changeDataSource(oldDs, newDs) {\n        if (oldDs) {\n            oldDs.disconnect(this);\n        }\n        this._needsUpdate = true;\n        return newDs ? newDs.connect(this) : of();\n    }\n    /**\n     * Update the `CdkVirtualForOfContext` for all views.\n     * @private\n     * @return {?}\n     */\n    _updateContext() {\n        /** @type {?} */\n        const count = this._data.length;\n        /** @type {?} */\n        let i = this._viewContainerRef.length;\n        while (i--) {\n            /** @type {?} */\n            let view = (/** @type {?} */ (this._viewContainerRef.get(i)));\n            view.context.index = this._renderedRange.start + i;\n            view.context.count = count;\n            this._updateComputedContextProperties(view.context);\n            view.detectChanges();\n        }\n    }\n    /**\n     * Apply changes to the DOM.\n     * @private\n     * @param {?} changes\n     * @return {?}\n     */\n    _applyChanges(changes) {\n        // Rearrange the views to put them in the right location.\n        changes.forEachOperation((/**\n         * @param {?} record\n         * @param {?} adjustedPreviousIndex\n         * @param {?} currentIndex\n         * @return {?}\n         */\n        (record, adjustedPreviousIndex, currentIndex) => {\n            if (record.previousIndex == null) { // Item added.\n                // Item added.\n                /** @type {?} */\n                const view = this._insertViewForNewItem((/** @type {?} */ (currentIndex)));\n                view.context.$implicit = record.item;\n            }\n            else if (currentIndex == null) { // Item removed.\n                this._cacheView(this._detachView((/** @type {?} */ (adjustedPreviousIndex))));\n            }\n            else { // Item moved.\n                // Item moved.\n                /** @type {?} */\n                const view = (/** @type {?} */ (this._viewContainerRef.get((/** @type {?} */ (adjustedPreviousIndex)))));\n                this._viewContainerRef.move(view, currentIndex);\n                view.context.$implicit = record.item;\n            }\n        }));\n        // Update $implicit for any items that had an identity change.\n        changes.forEachIdentityChange((/**\n         * @param {?} record\n         * @return {?}\n         */\n        (record) => {\n            /** @type {?} */\n            const view = (/** @type {?} */ (this._viewContainerRef.get((/** @type {?} */ (record.currentIndex)))));\n            view.context.$implicit = record.item;\n        }));\n        // Update the context variables on all items.\n        /** @type {?} */\n        const count = this._data.length;\n        /** @type {?} */\n        let i = this._viewContainerRef.length;\n        while (i--) {\n            /** @type {?} */\n            const view = (/** @type {?} */ (this._viewContainerRef.get(i)));\n            view.context.index = this._renderedRange.start + i;\n            view.context.count = count;\n            this._updateComputedContextProperties(view.context);\n        }\n    }\n    /**\n     * Cache the given detached view.\n     * @private\n     * @param {?} view\n     * @return {?}\n     */\n    _cacheView(view) {\n        if (this._templateCache.length < this.cdkVirtualForTemplateCacheSize) {\n            this._templateCache.push(view);\n        }\n        else {\n            /** @type {?} */\n            const index = this._viewContainerRef.indexOf(view);\n            // It's very unlikely that the index will ever be -1, but just in case,\n            // destroy the view on its own, otherwise destroy it through the\n            // container to ensure that all the references are removed.\n            if (index === -1) {\n                view.destroy();\n            }\n            else {\n                this._viewContainerRef.remove(index);\n            }\n        }\n    }\n    /**\n     * Inserts a view for a new item, either from the cache or by creating a new one.\n     * @private\n     * @param {?} index\n     * @return {?}\n     */\n    _insertViewForNewItem(index) {\n        return this._insertViewFromCache(index) || this._createEmbeddedViewAt(index);\n    }\n    /**\n     * Update the computed properties on the `CdkVirtualForOfContext`.\n     * @private\n     * @param {?} context\n     * @return {?}\n     */\n    _updateComputedContextProperties(context) {\n        context.first = context.index === 0;\n        context.last = context.index === context.count - 1;\n        context.even = context.index % 2 === 0;\n        context.odd = !context.even;\n    }\n    /**\n     * Creates a new embedded view and moves it to the given index\n     * @private\n     * @param {?} index\n     * @return {?}\n     */\n    _createEmbeddedViewAt(index) {\n        // Note that it's important that we insert the item directly at the proper index,\n        // rather than inserting it and the moving it in place, because if there's a directive\n        // on the same node that injects the `ViewContainerRef`, Angular will insert another\n        // comment node which can throw off the move when it's being repeated for all items.\n        return this._viewContainerRef.createEmbeddedView(this._template, {\n            $implicit: (/** @type {?} */ (null)),\n            cdkVirtualForOf: this._cdkVirtualForOf,\n            index: -1,\n            count: -1,\n            first: false,\n            last: false,\n            odd: false,\n            even: false\n        }, index);\n    }\n    /**\n     * Inserts a recycled view from the cache at the given index.\n     * @private\n     * @param {?} index\n     * @return {?}\n     */\n    _insertViewFromCache(index) {\n        /** @type {?} */\n        const cachedView = this._templateCache.pop();\n        if (cachedView) {\n            this._viewContainerRef.insert(cachedView, index);\n        }\n        return cachedView || null;\n    }\n    /**\n     * Detaches the embedded view at the given index.\n     * @private\n     * @param {?} index\n     * @return {?}\n     */\n    _detachView(index) {\n        return (/** @type {?} */ (this._viewContainerRef.detach(index)));\n    }\n}\nCdkVirtualForOf.ɵfac = function CdkVirtualForOf_Factory(t) { return new (t || CdkVirtualForOf)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(CdkVirtualScrollViewport, 4), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };\nCdkVirtualForOf.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: CdkVirtualForOf, selectors: [[\"\", \"cdkVirtualFor\", \"\", \"cdkVirtualForOf\", \"\"]], inputs: { cdkVirtualForTemplateCacheSize: \"cdkVirtualForTemplateCacheSize\", cdkVirtualForOf: \"cdkVirtualForOf\", cdkVirtualForTrackBy: \"cdkVirtualForTrackBy\", cdkVirtualForTemplate: \"cdkVirtualForTemplate\" } });\n/** @nocollapse */\nCdkVirtualForOf.ctorParameters = () => [\n    { type: ViewContainerRef },\n    { type: TemplateRef },\n    { type: IterableDiffers },\n    { type: CdkVirtualScrollViewport, decorators: [{ type: SkipSelf }] },\n    { type: NgZone }\n];\nCdkVirtualForOf.propDecorators = {\n    cdkVirtualForOf: [{ type: Input }],\n    cdkVirtualForTrackBy: [{ type: Input }],\n    cdkVirtualForTemplate: [{ type: Input }],\n    cdkVirtualForTemplateCacheSize: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CdkVirtualForOf, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkVirtualFor][cdkVirtualForOf]'\n            }]\n    }], function () { return [{ type: ɵngcc0.ViewContainerRef }, { type: ɵngcc0.TemplateRef }, { type: ɵngcc0.IterableDiffers }, { type: CdkVirtualScrollViewport, decorators: [{\n                type: SkipSelf\n            }] }, { type: ɵngcc0.NgZone }]; }, { cdkVirtualForTemplateCacheSize: [{\n            type: Input\n        }], cdkVirtualForOf: [{\n            type: Input\n        }], cdkVirtualForTrackBy: [{\n            type: Input\n        }], cdkVirtualForTemplate: [{\n            type: Input\n        }] }); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass ScrollingModule {\n}\nScrollingModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: ScrollingModule });\nScrollingModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function ScrollingModule_Factory(t) { return new (t || ScrollingModule)(); }, imports: [[BidiModule, PlatformModule],\n        BidiModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ScrollingModule, { declarations: function () { return [CdkFixedSizeVirtualScroll,\n        CdkScrollable,\n        CdkVirtualForOf,\n        CdkVirtualScrollViewport]; }, imports: function () { return [BidiModule, PlatformModule]; }, exports: function () { return [BidiModule,\n        CdkFixedSizeVirtualScroll,\n        CdkScrollable,\n        CdkVirtualForOf,\n        CdkVirtualScrollViewport]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ScrollingModule, [{\n        type: NgModule,\n        args: [{\n                imports: [BidiModule, PlatformModule],\n                exports: [\n                    BidiModule,\n                    CdkFixedSizeVirtualScroll,\n                    CdkScrollable,\n                    CdkVirtualForOf,\n                    CdkVirtualScrollViewport,\n                ],\n                declarations: [\n                    CdkFixedSizeVirtualScroll,\n                    CdkScrollable,\n                    CdkVirtualForOf,\n                    CdkVirtualScrollViewport,\n                ]\n            }]\n    }], null, null); })();\n/**\n * @deprecated ScrollDispatchModule has been renamed to ScrollingModule.\n * \\@breaking-change 8.0.0 delete this alias\n */\nclass ScrollDispatchModule {\n}\nScrollDispatchModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: ScrollDispatchModule });\nScrollDispatchModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function ScrollDispatchModule_Factory(t) { return new (t || ScrollDispatchModule)(); }, imports: [[ScrollingModule],\n        ScrollingModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ScrollDispatchModule, { imports: [ScrollingModule], exports: [ScrollingModule] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ScrollDispatchModule, [{\n        type: NgModule,\n        args: [{\n                imports: [ScrollingModule],\n                exports: [ScrollingModule]\n            }]\n    }], null, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Time in ms to throttle the resize events by default.\n * @type {?}\n */\nconst DEFAULT_RESIZE_TIME = 20;\n/**\n * Simple utility for getting the bounds of the browser viewport.\n * \\@docs-private\n */\nclass ViewportRuler {\n    /**\n     * @param {?} _platform\n     * @param {?} ngZone\n     */\n    constructor(_platform, ngZone) {\n        this._platform = _platform;\n        ngZone.runOutsideAngular((/**\n         * @return {?}\n         */\n        () => {\n            this._change = _platform.isBrowser ?\n                merge(fromEvent(window, 'resize'), fromEvent(window, 'orientationchange')) :\n                of();\n            // Note that we need to do the subscription inside `runOutsideAngular`\n            // since subscribing is what causes the event listener to be added.\n            this._invalidateCache = this.change().subscribe((/**\n             * @return {?}\n             */\n            () => this._updateViewportSize()));\n        }));\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this._invalidateCache.unsubscribe();\n    }\n    /**\n     * Returns the viewport's width and height.\n     * @return {?}\n     */\n    getViewportSize() {\n        if (!this._viewportSize) {\n            this._updateViewportSize();\n        }\n        /** @type {?} */\n        const output = { width: this._viewportSize.width, height: this._viewportSize.height };\n        // If we're not on a browser, don't cache the size since it'll be mocked out anyway.\n        if (!this._platform.isBrowser) {\n            this._viewportSize = (/** @type {?} */ (null));\n        }\n        return output;\n    }\n    /**\n     * Gets a ClientRect for the viewport's bounds.\n     * @return {?}\n     */\n    getViewportRect() {\n        // Use the document element's bounding rect rather than the window scroll properties\n        // (e.g. pageYOffset, scrollY) due to in issue in Chrome and IE where window scroll\n        // properties and client coordinates (boundingClientRect, clientX/Y, etc.) are in different\n        // conceptual viewports. Under most circumstances these viewports are equivalent, but they\n        // can disagree when the page is pinch-zoomed (on devices that support touch).\n        // See https://bugs.chromium.org/p/chromium/issues/detail?id=489206#c4\n        // We use the documentElement instead of the body because, by default (without a css reset)\n        // browsers typically give the document body an 8px margin, which is not included in\n        // getBoundingClientRect().\n        /** @type {?} */\n        const scrollPosition = this.getViewportScrollPosition();\n        const { width, height } = this.getViewportSize();\n        return {\n            top: scrollPosition.top,\n            left: scrollPosition.left,\n            bottom: scrollPosition.top + height,\n            right: scrollPosition.left + width,\n            height,\n            width,\n        };\n    }\n    /**\n     * Gets the (top, left) scroll position of the viewport.\n     * @return {?}\n     */\n    getViewportScrollPosition() {\n        // While we can get a reference to the fake document\n        // during SSR, it doesn't have getBoundingClientRect.\n        if (!this._platform.isBrowser) {\n            return { top: 0, left: 0 };\n        }\n        // The top-left-corner of the viewport is determined by the scroll position of the document\n        // body, normally just (scrollLeft, scrollTop). However, Chrome and Firefox disagree about\n        // whether `document.body` or `document.documentElement` is the scrolled element, so reading\n        // `scrollTop` and `scrollLeft` is inconsistent. However, using the bounding rect of\n        // `document.documentElement` works consistently, where the `top` and `left` values will\n        // equal negative the scroll position.\n        /** @type {?} */\n        const documentElement = (/** @type {?} */ (document.documentElement));\n        /** @type {?} */\n        const documentRect = documentElement.getBoundingClientRect();\n        /** @type {?} */\n        const top = -documentRect.top || document.body.scrollTop || window.scrollY ||\n            documentElement.scrollTop || 0;\n        /** @type {?} */\n        const left = -documentRect.left || document.body.scrollLeft || window.scrollX ||\n            documentElement.scrollLeft || 0;\n        return { top, left };\n    }\n    /**\n     * Returns a stream that emits whenever the size of the viewport changes.\n     * @param {?=} throttleTime Time in milliseconds to throttle the stream.\n     * @return {?}\n     */\n    change(throttleTime = DEFAULT_RESIZE_TIME) {\n        return throttleTime > 0 ? this._change.pipe(auditTime(throttleTime)) : this._change;\n    }\n    /**\n     * Updates the cached viewport size.\n     * @private\n     * @return {?}\n     */\n    _updateViewportSize() {\n        this._viewportSize = this._platform.isBrowser ?\n            { width: window.innerWidth, height: window.innerHeight } :\n            { width: 0, height: 0 };\n    }\n}\nViewportRuler.ɵfac = function ViewportRuler_Factory(t) { return new (t || ViewportRuler)(ɵngcc0.ɵɵinject(ɵngcc1.Platform), ɵngcc0.ɵɵinject(ɵngcc0.NgZone)); };\nViewportRuler.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ViewportRuler, factory: ViewportRuler.ɵfac, providedIn: 'root' });\n/** @nocollapse */\nViewportRuler.ctorParameters = () => [\n    { type: Platform },\n    { type: NgZone }\n];\n/** @nocollapse */ ViewportRuler.ngInjectableDef = ɵɵdefineInjectable({ factory: function ViewportRuler_Factory() { return new ViewportRuler(ɵɵinject(Platform), ɵɵinject(NgZone)); }, token: ViewportRuler, providedIn: \"root\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ViewportRuler, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: ɵngcc1.Platform }, { type: ɵngcc0.NgZone }]; }, null); })();\n/**\n * \\@docs-private \\@deprecated \\@breaking-change 8.0.0\n * @param {?} parentRuler\n * @param {?} platform\n * @param {?} ngZone\n * @return {?}\n */\nfunction VIEWPORT_RULER_PROVIDER_FACTORY(parentRuler, platform, ngZone) {\n    return parentRuler || new ViewportRuler(platform, ngZone);\n}\n/**\n * \\@docs-private \\@deprecated \\@breaking-change 8.0.0\n * @type {?}\n */\nconst VIEWPORT_RULER_PROVIDER = {\n    // If there is already a ViewportRuler available, use that. Otherwise, provide a new one.\n    provide: ViewportRuler,\n    deps: [[new Optional(), new SkipSelf(), ViewportRuler], Platform, NgZone],\n    useFactory: VIEWPORT_RULER_PROVIDER_FACTORY\n};\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { _fixedSizeVirtualScrollStrategyFactory, FixedSizeVirtualScrollStrategy, CdkFixedSizeVirtualScroll, SCROLL_DISPATCHER_PROVIDER_FACTORY, DEFAULT_SCROLL_TIME, ScrollDispatcher, SCROLL_DISPATCHER_PROVIDER, CdkScrollable, ScrollingModule, ScrollDispatchModule, VIEWPORT_RULER_PROVIDER_FACTORY, DEFAULT_RESIZE_TIME, ViewportRuler, VIEWPORT_RULER_PROVIDER, CdkVirtualForOf, VIRTUAL_SCROLL_STRATEGY, CdkVirtualScrollViewport };\n\n//# sourceMappingURL=scrolling.js.map","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {RouterModule} from '@angular/router';\nimport {Routes} from '@angular/router';\nimport {ComponentsModule} from '@app/components/components.module';\nimport {PipesModule} from '@app/pipes/pipes.module';\nimport {FontAwesomeModule} from '@fortawesome/angular-fontawesome';\nimport {IonicModule} from '@ionic/angular';\nimport {TranslateModule} from '@ngx-translate/core';\n\nimport {OrdersListPage} from './orders-list.page';\nimport {ScrollingModule} from '@angular/cdk/scrolling';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrdersListPage\n  }\n];\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        RouterModule.forChild(routes),\n        FontAwesomeModule,\n        ComponentsModule,\n        PipesModule,\n        TranslateModule,\n        ReactiveFormsModule,\n        ScrollingModule,\n    ],\n  declarations: [OrdersListPage]\n})\nexport class OrderListPageModule {\n}\n","<ion-header>\n  <ion-toolbar>\n    <!--    <ion-buttons>-->\n    <ion-menu-button slot=\"start\" (click)=\"openMenu($event)\">\n      <img src=\"assets/images/logo_menu.png\"/>\n      <ion-badge color=\"danger\"\n                 *ngIf=\"pendingNotifications && !deployStatus.newVersionAvailable\">{{ pendingNotifications }}</ion-badge>\n      <fa-layers class=\"update-cloud\"\n                 *ngIf=\"deployStatus && deployStatus.newVersionAvailable\">\n        <fa-icon [icon]=\"['fas', 'download']\" size=\"xs\"\n                 transform=\"up-8\"></fa-icon>\n      </fa-layers>\n    </ion-menu-button>\n\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"hints()\" *ngIf=\"isDebug && features.introJsButtons\">\n        <fa-icon [icon]=\"['fas', 'question']\" size=\"lg\"></fa-icon>\n      </ion-button>\n      <ion-button\n        *ngIf=\"settings.buttons.multipleSelection\"\n        (click)=\"toggleSelect()\"\n        [color]=\"settings.actions.canSelect ? 'success' : ''\"\n        class=\"top-bar-action-button selection-intro\">\n        <fa-icon [icon]=\"['fas', 'check-square']\" size=\"lg\" class=\"fa-bar-button\"></fa-icon>\n      </ion-button>\n      <ion-button\n        *ngIf=\"settings.buttons.map\"\n        (click)=\"openMap()\"\n        class=\"top-bar-action-button native-map-intro\">\n        <fa-icon [icon]=\"['fas','map']\" size=\"lg\" class=\"fa-bar-button\"></fa-icon>\n      </ion-button>\n\n      <ion-button\n        *ngIf=\"settings.buttons.reordering\"\n        (click)=\" toggleOrdering()\"\n        [ngClass]=\"{'inactive-button': !allOrders?.length || !canReorder}\"\n        class=\"top-bar-action-button ordering-intro\">\n        <fa-icon size=\"lg\" [icon]=\"['fas', 'retweet']\"></fa-icon>\n      </ion-button>\n\n      <ion-button\n        *ngIf=\"settings.buttons.optimization && settings.canDoRouteOptimization\"\n        (click)=\"optimizeRoute()\"\n        [ngClass]=\"{'inactive-button': !allOrders?.length || !canOptimize}\"\n        class=\"top-bar-action-button  optimize-intro\">\n        <fa-icon [icon]=\"['fas','route']\" size=\"lg\" class=\"fa-bar-button\"\n                 [hidden]=\"optimizationInProgress\"></fa-icon>\n        <fa-icon [icon]=\"['fas','spinner']\" [pulse]=\"true\" size=\"lg\" class=\"fa-bar-button icon-color-primary\"\n                 [hidden]=\"!optimizationInProgress\"></fa-icon>\n      </ion-button>\n\n      <ion-button\n        *ngIf=\"settings.buttons.grouping\"\n        (click)=\"groupOrders()\"\n        class=\"top-bar-action-button grouping-intro\"\n        [color]=\"statusSettings.groupByProvider ? 'success' : ''\">\n        <fa-icon [icon]=\"['fal','list-alt']\" size=\"lg\" class=\"fa-bar-button\"></fa-icon>\n      </ion-button>\n\n      <ion-button\n        *ngIf=\"settings.buttons.sorting\"\n        (click)=\"openSortMenu($event)\"\n        class=\"top-bar-action-button sort-intro\">\n        <fa-icon *ngIf=\"statusSettings.sortOrder === 'lastName'\" [icon]=\"['far','sort-alpha-down']\"\n                 size=\"lg\"></fa-icon>\n\n        <fa-icon *ngIf=\"statusSettings.sortOrder === 'sequence'\" [icon]=\"['far','sort-numeric-down']\" size=\"lg\"\n                 class=\"sort-icon\"></fa-icon>\n\n        <fa-layers class=\"fa-fw fa-1x sort-icon\" *ngIf=\"statusSettings.sortOrder === 'distance'\">\n          <fa-icon [icon]=\"['far','arrow-down']\" transform=\"grow-5 left-5\"></fa-icon>\n          <fa-layers-text transform=\"shrink-6 right-5 up-4\" style=\"font-weight: bold;\"\n                          content=\"{{'km' | DistanceUnit:settings.distanceUnit}}\"></fa-layers-text>\n        </fa-layers>\n\n        <fa-layers class=\"fa-fw fa-1x sort-icon\" *ngIf=\"statusSettings.sortOrder === 'avgtime'\">\n          <fa-icon [icon]=\"['far','arrow-down']\" transform=\"grow-5 left-5\"></fa-icon>\n          <fa-icon [icon]=\"['far', 'clock']\" transform=\"shrink-6 right-5 up-4\"></fa-icon>\n        </fa-layers>\n      </ion-button>\n\n      <ion-button slot=\"icon-only\"\n                  *ngIf=\"settings.buttons.filter\"\n                  (click)=\"openProperties($event)\"\n                  [color]=\"statusSettings.activeFilter.filtering ? 'success' : ''\" class=\"filter-intro\">\n        <fa-icon [icon]=\"['fas','filter']\" size=\"lg\" class=\"fa-bar-button\"></fa-icon>\n      </ion-button>\n\n    </ion-buttons>\n    <!--    </ion-buttons>-->\n  </ion-toolbar>\n\n  <ion-toolbar *ngIf=\"!connectionStatus.isNetworkConnectedForUser || !connectionStatus.isMqttConnectedForUser\"\n               (click)=\"displayConnectionDetail()\" class=\"status-toolbar\"\n               [color]=\"!connectionStatus.isNetworkConnectedForUser ? 'secondary' : 'lightwarning'\">\n\n    <ion-title *ngIf=\"!connectionStatus.isNetworkConnectedForUser\">\n      <fa-icon [icon]=\"['fas', 'exclamation-triangle']\" class=\"disconnected status-icon\"\n               *ngIf=\"!connectionStatus.isNetworkConnectedForUser\"></fa-icon>\n      <span class=\"status-bar-content\">{{ 'pages.offline-info.offline_mode' | translate }}</span>\n    </ion-title>\n\n    <ion-title *ngIf=\"!connectionStatus.isMqttConnectedForUser && connectionStatus.isNetworkConnectedForUser\">\n      <fa-icon [icon]=\"['fas', 'unlink']\" class=\"disconnected status-icon\"\n               *ngIf=\"!connectionStatus.isMqttConnectedForUser\"></fa-icon>&nbsp;\n      <span class=\"status-bar-content\">{{ 'pages.offline-info.reconnecting' | translate }}</span>\n      <ion-spinner class=\"status-bar-content\" name=\"dots\"></ion-spinner>\n    </ion-title>\n\n    <ion-buttons slot=\"end\">\n      <ion-button>\n        <fa-icon class=\"status-bar-content question-icon\" [icon]=\"['fas', 'question-circle']\"></fa-icon>\n        &nbsp;{{ 'pages.offline-info.button-text' | translate }}\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n\n<ion-content #ordersListContent>\n  <ion-fab (click)=\"fullSync()\"\n           *ngIf=\"connectionStatus.isNetworkConnectedForUser && !connectionStatus.isMqttConnectedForUser\"\n           horizontal=\"end\" vertical=\"bottom\">\n    <ion-fab-button color=\"lightwarning\">\n      <fa-icon [icon]=\"['fas', 'cloud-download-alt']\" [ngClass]=\"['fa-lg']\"></fa-icon>\n    </ion-fab-button>\n  </ion-fab>\n\n  <awaiting-transition-indicator></awaiting-transition-indicator>\n\n  <ion-searchbar [(ngModel)]=\"statusSettings.activeFilter.allFields\"\n                 [formControl]=\"searchControl\"\n                 (ionInput)=\"onSearchInput()\"\n                 showCancelButton=\"always\"\n                 inputmode=\"search\"\n                 (ionClear)=\"cancelSearchFilter()\"\n                 placeholder=\"{{ 'options.search.allFields' | translate }}\"\n                 *ngIf=\"statusSettings.search.allFields\"\n  ></ion-searchbar>\n\n  <div *ngIf=\"searching\" class=\"spinner-container\">\n    <ion-spinner></ion-spinner>\n  </div>\n\n  <ion-item-divider *ngIf=\"settings.actions.canSelect\" class=\"select-multiple-header\"\n                    style=\"height: 2rem; padding-left: 0.5rem;\">\n    <ion-checkbox class=\"order-item-select-all\"\n                  [(ngModel)]=\"allSelected\"\n                  (ionChange)=\"changeAllSelection($event.detail.checked)\"\n    ></ion-checkbox>\n    <ion-label class=\"ion-checkbox-label\" style=\"margin-top: 0;\"><span translate=\"actions.select_all\"></span>\n    </ion-label>\n  </ion-item-divider>\n\n  <ng-container>\n\n    <cdk-virtual-scroll-viewport\n      #itemList\n      [itemSize]=\"approxHeaderHeight\"\n      style=\"height: 100%; width:100%; overflow-x: hidden;\"\n      [maxBufferPx]=\"760\"\n      [minBufferPx]=\"760\"\n      orientation=\"vertical\"\n      *ngIf=\"allOrders && allOrders.length > 0\">\n\n      <ng-container *cdkVirtualFor=\"let group of orderGroups; let iGroup = index; trackBy: trackOrderGroupByBound\">\n        <ion-item-divider class=\"item-ios-with-padding group-item-divider\"\n                          [ngClass]=\"group.viewClass\" [hidden]=\"!group.name\">\n          <ion-checkbox class=\"order-item-select-group\"\n                        [hidden]=\"!settings.actions.canSelect\"\n                        [(ngModel)]=\"group.selected\"\n                        (ionChange)=\"changeGroupSelection(group, $event.detail.checked)\"></ion-checkbox>\n\n          <ion-label>\n            <ion-badge color=\"primary\">{{ group.size }}</ion-badge>&nbsp;\n            <span>{{group.name | translate}}</span>\n          </ion-label>\n\n          <span class=\"subtitle\">{{group.subtitle}}</span>\n\n          <ion-toggle slot=\"end\" [(ngModel)]=\"group.visible\" (ngModelChange)=\"toggleGroupView(group.name)\"></ion-toggle>\n        </ion-item-divider>\n\n        <ion-item-sliding #slidingItem *ngFor=\"let orderItem of group.orders; let i = index\"\n                          [hidden]=\"!group.visible\">\n          <ion-item class=\"item-no-padding ion-text-wrap item-inner item-native\"\n                    [hidden]=\"orderItem?.hidden\">\n            <ion-checkbox class=\"order-item-select\" *ngIf=\"orderItem && settings.actions.canSelect\"\n                          [(ngModel)]=\"orderItem.selected\"\n                          (ionChange)=\"markItem(orderItem)\" slot=\"start\"></ion-checkbox>\n            <sequence-number [order]=\"orderItem?.order\" slot=\"start\"\n                             *ngIf=\"!settings.actions.canSelect && orderItem?.order?.sequence\"></sequence-number>\n            <order-item class=\"order-item-fill\" [orderView]=\"orderItem\" [index]=\"i\" [reference]=\"timeReference\"\n                        [orderStatus]=\"status\"\n                        [withDistance]=\"statusSettings.sortOrder === 'distance'\"\n                        (click)=\"selectItem($event, orderItem)\"></order-item>\n          </ion-item>\n          <ion-item-options side=\"end\">\n            <ion-item-option expand=\"full\" class=\"sliding-item-button\"\n                             color=\"{{ transition.event.style }}\"\n                             [ngClass]=\"{'emphasized-transition-button': transition.event.emphasized}\"\n                             *ngFor=\"let transition of orderItem?.transitions\"\n                             [hidden]=\"transition.secondary\"\n                             [disabled]=\"transitionDisabled(orderItem, transition)\"\n                             (click)=\"transitionOrder(orderItem, transition, slidingItem)\">\n              <fa-icon [icon]=\"['fas', transition.event.icon]\"></fa-icon>&nbsp;\n              <span\n                [ngClass]=\"{'text-bold': transition.event.emphasized}\">{{ transition.event.labelKey | translate }}</span>\n            </ion-item-option>\n          </ion-item-options>\n        </ion-item-sliding>\n      </ng-container>\n\n    </cdk-virtual-scroll-viewport>\n  </ng-container>\n\n  <ion-item-group *ngIf=\"(!allOrders || allOrders.length < 1) && !refreshInProgress\"\n                  class=\"italic text-muted\">\n    <ion-item lines=\"none\">\n      <ion-label class=\"text-center\">{{ 'messages.empty_list' | translate }}</ion-label>\n    </ion-item>\n  </ion-item-group>\n\n  <ion-list>\n    <ion-item-divider *ngFor=\"let hiddenGroup of orderGroups\" [hidden]=\"!hiddenGroup.hidden\"\n                      class=\"item-ios-with-padding group-item-divider\" [ngClass]=\"hiddenGroup.viewClass\">\n      <ion-label>\n        <ion-badge color=\"primary\">{{ hiddenGroup.size }}</ion-badge>&nbsp;\n        <span>{{hiddenGroup.name | translate}}</span>\n      </ion-label>\n      <ion-toggle slot=\"end\" [(ngModel)]=\"hiddenGroup.visible\"\n                  (ngModelChange)=\"toggleGroupView(hiddenGroup.name)\"></ion-toggle>\n    </ion-item-divider>\n  </ion-list>\n\n</ion-content>\n\n<ion-footer [ngClass]=\"{'one-transition-footer':transitionsSelection.length === 1,\n'one-type-multiple-transition-footer': transitionsSelection.length === 4,\n'two-type-multiple-transition-footer': transitionsSelection.length === 6  }\">\n  <ion-toolbar *ngIf=\"statusSettings.activeFilter.filtering\" color=\"dark\">\n    <fa-icon [icon]=\"['fas', 'exclamation-triangle']\" slot=\"start\"></fa-icon>\n    <ion-label>\n      <span translate=\"options.activeFilters.label\"></span>\n    </ion-label>\n    <ion-button (click)=\"resetFilters()\" slot=\"end\">\n      <span translate=\"options.activeFilters.clear\"></span>\n    </ion-button>\n  </ion-toolbar>\n\n  <ion-grid *ngIf=\"hasOneSelected\" class=\"ion-no-margin ion-no-padding\">\n    <ion-row *ngIf=\"transitionsSelection.length > 1\">\n      <ion-col size=\"6\" *ngFor=\"let transition of transitionsSelection\" class=\"transitions-buttons-col\">\n        <transition-button [transition]=\"transition\"\n                           [connected]=\"connectionStatus.isNetworkConnectedForUser\"\n                           (onClick)=\"transitionSelection(transition, $event)\"></transition-button>\n      </ion-col>\n    </ion-row>\n    <ion-row *ngIf=\"transitionsSelection.length === 1\">\n      <ion-col size=\"12\" *ngFor=\"let transition of transitionsSelection\" class=\"transitions-buttons-col\">\n        <transition-button [transition]=\"transition\"\n                           [connected]=\"connectionStatus.isNetworkConnectedForUser\"\n                           (onClick)=\"transitionSelection(transition, $event)\"></transition-button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n</ion-footer>\n\n<ion-footer *ngIf=\"status === orderOnTheWayStatus && allOrders.length === 0\n&& settings.displayProviderFooter && !statusSettings.activeFilter.filtering\">\n  <ion-grid class=\"ion-no-margin ion-no-padding\">\n    <ion-row *ngFor=\"let provider of settings.selectedProviders\">\n      <ion-col *ngIf=\"provider.selected\">\n        <ion-item lines=\"none\" color=\"secondary\" class=\"transition-button\">\n          <fa-icon [icon]=\"['fas','building']\" size=\"lg\" slot=\"start\"></fa-icon>\n          <span class=\"transitions-buttons-text\">\n            {{provider.name}} : {{provider.address.addressOneLine}}\n          </span>\n          <fa-icon [icon]=\"['fas','location-arrow']\" size=\"lg\" slot=\"end\"\n                   (click)=\"openMapForProvider(provider)\"></fa-icon>\n        </ion-item>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-footer>\n","import {Component} from '@angular/core';\nimport {ViewChild} from '@angular/core';\nimport {FormControl} from '@angular/forms';\nimport {Router} from '@angular/router';\nimport {Order} from '@models/business/order.model';\nimport {Provider} from '@models/business/provider.model';\nimport {ConnectionStatus} from '@models/information/connection-status.model';\nimport {DeviceInfo} from '@models/information/device-info.model';\nimport {RouteSummary} from '@models/optimize-route/route-summary.model';\nimport {OrderGroup} from '@models/order-helper/order-group.model';\nimport {OrderStatus, OrderStatusConverter} from '@models/order-helper/order-status.enum';\nimport {OrderView} from '@models/order-helper/order-view.model';\nimport {OrdersAccessor} from '@models/order-helper/orders-accessor.model';\nimport {UserSettings} from '@models/settings/settings.model';\nimport {StatusSettings} from '@models/settings/status-settings.model';\nimport {Transition} from '@models/workflow/transition.model';\nimport {OptimizeOptionsPage} from '@app/pages/optimize-options/optimize-options.page';\nimport {OrderDetailTabsPage} from '@app/pages/order-detail-tabs/order-detail-tabs.page';\nimport {TransitionOrders} from '@app/pages/orders-list/transition-orders.model';\nimport {ReorderModalPage} from '@app/pages/reorder-modal/reorder-modal.page';\nimport {SortPopoverPage} from '@app/pages/sort-popover/sort-popover.page';\nimport {APPROX_ITEM_HEIGHT} from '@utils/order-height-calculator';\nimport {DEFAULT_HEADER_HEIGHT} from '@utils/order-height-calculator';\nimport {headerHeight} from '@utils/order-height-calculator';\nimport {orderViewHeight} from '@utils/order-height-calculator';\nimport {Platform} from '@ionic/angular';\nimport {ToastController} from '@ionic/angular';\nimport {IonItemSliding} from '@ionic/angular';\nimport {ModalController} from '@ionic/angular';\nimport {MenuController} from '@ionic/angular';\nimport {NavController} from '@ionic/angular';\nimport {PopoverController} from '@ionic/angular';\nimport {IonContent} from '@ionic/angular';\nimport {TranslateService} from '@ngx-translate/core';\nimport {ConnectionStatusService} from '@services/connection-status-service/connection-status.service';\nimport {Features} from '@services/features/features.model';\nimport {FeaturesService} from '@services/features/features.service';\nimport {MblsAnalyticsService} from '@services/mbls-analytics-service/MblsAnalyticsService';\nimport {IonicDeployStatus} from '@services/ionic-deploy/ionic-deploy-status';\nimport {IonicDeploy} from '@services/ionic-deploy/ionic-deploy.service';\nimport {LogService} from '@services/log/log.service';\nimport {MobileContextService} from '@services/mobile-configuration-service/mobile-context.service';\nimport {NotificationService} from '@services/notification-service/notification.service';\nimport {OrderService} from '@services/order-service/order.service';\nimport {OrderSyncService} from '@services/order-sync/order-sync.service';\nimport {SettingsManager} from '@services/settings-providers/settings.service';\nimport {TransitionService} from '@services/transition/transition.service';\nimport introJs from 'intro.js/intro.js';\nimport * as moment from 'moment';\nimport {Subject, Subscription} from 'rxjs';\nimport {debounceTime, takeUntil} from 'rxjs/operators';\nimport Timer = NodeJS.Timer;\nimport {MapPage} from '@app/pages/map/map.page';\nimport {SelectedProvider} from '@models/selected-provider.model';\nimport {MapService} from '@services/map/map.service';\nimport { CommonUtils } from '@services/utils/common-utils';\n\nconst CONFIG = {\n  GA: {\n    PAGE_NAME: 'OrdersListPage',\n    EVENT: {\n      'ORDER_LIST-MULTIPLE_SELECT': {\n        NAME: 'order_list',\n        ACTION: 'multiple_select'\n      },\n      MULTIPLE_SELECT_TRANSITION: {\n        NAME: 'order_list_transition',\n        ACTION: 'multiple_select_transition'\n      },\n      ORDER_LIST_FORCING_SYNC: {\n        NAME: 'force-sync',\n        ACTION: 'on-fab-icon'\n      },\n      ORDER_ITEM_SWIPE: {\n        NAME: 'item_swipe',\n        ACTION: 'swipe'\n      },\n      ORDER_TRANSITION: {\n        NAME: 'transition_item',\n        ACTION: 'button_pressed'\n      }\n    }\n  },\n  MAP_DID_LEAVE_EVENT: 'mapDidLeave'\n};\n\n@Component({\n  selector: 'app-order-list',\n  templateUrl: './orders-list.page.html',\n  styleUrls: ['./orders-list.page.scss'],\n})\nexport class OrdersListPage {\n  public orderGroups: Array<OrderGroup> = [];\n  public status: OrderStatus;\n  public allSelected = false;\n  public hasOneSelected = false;\n  searching: any = false;\n  public transitionsSelection: Array<Transition> = [];\n  timeReference: moment.Moment = moment();\n  settings: UserSettings = new UserSettings(true);\n  statusSettings: StatusSettings = new StatusSettings();\n  refreshInProgress = false;\n  disabledSpecialGroups: Array<string> = [];\n  searchControl: FormControl;\n  public allOrders: Array<OrderView> = [];\n  private accessor: OrdersAccessor;\n  private unsubscribe: Subject<void> = new Subject<void>();\n  private unsubscribeAccessor: Subject<void> = new Subject<void>();\n  connectionStatus: ConnectionStatus = new ConnectionStatus();\n  deployStatus: IonicDeployStatus;\n  private timer: Timer;\n  public canOptimize = false;\n  public canReorder = false;\n  public optimizationInProgress = false;\n  private summary: RouteSummary;\n  private dummySequenceNumber = 0;\n  public isCordova = true;\n  pendingNotifications: number;\n\n  connectionStatusClass = 'connectionDefault';\n  private sendSequence = false;\n  private withHints = false;\n  private hintsIntroJs: any;\n  public isDebug: boolean;\n  features: Features = new Features();\n\n  private orderAccessorSubscription: Subscription;\n  private searchControlSubscription: Subscription;\n  private connectionStatusSubscription: Subscription;\n  private userSettingsSubscription: Subscription;\n  private summarySubscription: Subscription;\n  private unreadNotificationCountSubscription: Subscription;\n  private ionicStatusSubscription: Subscription;\n  private featureSubscription: Subscription;\n  private params: any;\n  protected _component: OrdersListPage;\n  approxHeaderHeight = DEFAULT_HEADER_HEIGHT;\n  approxItemHeight = APPROX_ITEM_HEIGHT;\n\n  orderOnTheWayStatus = OrderStatus.ON_THE_WAY_TO_CUSTOMER;\n\n  @ViewChild('ordersListContent') content: IonContent;\n  items: any[] = [];\n\n  /**\n   * Sliding item opening ratio\n   * When the sliding item is fully opened the ratio is at 1\n   * https://ionicframework.com/docs/api/item-sliding\n   * Thanks to this variable we are able to check if\n   * the sliding item is fully opened before processing the transition\n   */\n  private SLIDING_ITEM_OPEN_RATIO: number = 1;\n  isIos: boolean = false;\n  public isMobileWeb = false;\n  public swUpdateAvailable = false;\n\n  public trackOrderGroupByBound: (index: number, item: OrderGroup) => number;\n\n  constructor(private platform: Platform,\n              protected orderService: OrderService,\n              protected orderSync: OrderSyncService,\n              protected notificationService: NotificationService,\n              protected transitionService: TransitionService,\n              protected navCtrl: NavController,\n              private ionicDeploy: IonicDeploy,\n              protected deviceInfo: DeviceInfo,\n              protected menuCtrl: MenuController,\n              protected settingsManager: SettingsManager,\n              protected modalCtrl: ModalController,\n              private log: LogService,\n              private toastCtrl: ToastController,\n              private translateService: TranslateService,\n              private connectionStatusService: ConnectionStatusService,\n              private mobileContextService: MobileContextService,\n              private featuresService: FeaturesService,\n              private popoverCtrl: PopoverController,\n              private ga: MblsAnalyticsService,\n              private router: Router,\n              private mapService: MapService,\n              private commonUtils: CommonUtils\n  ) {\n\n    if (this.router.url === '/status-tabs/ready') {\n      this.status = OrderStatus.READY_FOR_HAULAGE;\n    } else if (this.router.url === '/status-tabs/back') {\n      this.status = OrderStatus.ON_THE_WAY_TO_PROVIDER;\n    } else {\n      this.status = OrderStatus.ON_THE_WAY_TO_CUSTOMER;\n    }\n\n    this.searchControl = new FormControl();\n\n    this.platform.ready()\n      .then(() => {\n        this.isDebug = this.deviceInfo.isDebug;\n        this.isCordova = this.platform.is('cordova');\n        this.isIos = this.platform.is('ios');\n        this.ga.trackView(CONFIG.GA.PAGE_NAME).catch(error => this.log.info(`Unable to track view ${CONFIG.GA.PAGE_NAME} with GA`, error));\n        this.isMobileWeb = this.platform.is('mobileweb');\n      });\n    const lorem = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, seddo eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.';\n\n    const images = [\n      'bandit',\n      'batmobile',\n      'blues-brothers',\n      'bueller',\n      'delorean',\n      'eleanor',\n      'general-lee',\n      'ghostbusters',\n      'knight-rider',\n      'mirth-mobile'\n    ];\n\n    function getImgSrc() {\n      const src = 'https://dummyimage.com/600x400/${Math.round( Math.random() * 99999)}/fff.png';\n      rotateImg++;\n      if (rotateImg === images.length) {\n        rotateImg = 0;\n      }\n      return src;\n    }\n\n    let rotateImg = 0;\n    for (let i = 0; i < 1000; i++) {\n      this.items.push({\n        name: i + ' - ' + images[rotateImg],\n        imgSrc: getImgSrc(),\n        avatarSrc: getImgSrc(),\n        imgHeight: Math.floor(Math.random() * 50 + 150),\n        content: lorem.substring(0, Math.random() * (lorem.length - 100) + 100)\n      });\n\n      rotateImg++;\n      if (rotateImg === images.length) {\n        rotateImg = 0;\n      }\n    }\n\n    this.trackOrderGroupByBound = this.trackOrderGroupBy.bind(this);\n\n  }\n\n  ionViewWillEnter(): void {\n    this.settingsManager.setCurrentStatus(this.status);\n\n    this.timer = setInterval(() => {\n      this.timeReference = moment();\n    }, 5000);\n\n    if (!this.searchControlSubscription) {\n      this.searchControlSubscription = this.searchControl.valueChanges\n        .pipe(\n          takeUntil(this.unsubscribeAccessor),\n          debounceTime(700)\n        )\n        .subscribe(search => {\n          this.searching = false;\n          this.settingsManager.filterChanged();\n        });\n    }\n    if (!this.orderAccessorSubscription) {\n      this.orderAccessorSubscription = this.orderService.ordersAccessor\n        .pipe(\n          takeUntil(this.unsubscribeAccessor)\n        )\n        .subscribe((accessor: OrdersAccessor) => {\n          this.accessor = accessor;\n          if (this.status) {\n            this.manageNewOrders(accessor);\n            if (this.canOptimize) {\n              this.orderService.loadRouteSummary();\n            }\n          }\n        });\n    }\n\n    if (!this.connectionStatusSubscription) {\n      this.connectionStatusSubscription = this.connectionStatusService.connectionStatusSubscription\n        .pipe(\n          takeUntil(this.unsubscribe)\n        )\n        .subscribe((next) => {\n\n          const connectionStatusHasChanged = !this.connectionStatus.isSameForUserAs(next);\n\n          this.connectionStatus = next;\n          if (!this.connectionStatus.isNetworkConnectedForUser) {\n            this.connectionStatusClass = 'internetLost';\n          } else if (!this.connectionStatus.isMqttConnectedForUser) {\n            this.connectionStatusClass = 'mqttLost';\n          } else {\n            this.connectionStatusClass = 'connectionDefault';\n          }\n\n          if (connectionStatusHasChanged) {\n            if (this.content) {\n              // this.content.resize();\n            }\n          }\n\n        });\n    }\n\n    if (!this.userSettingsSubscription) {\n      this.userSettingsSubscription = this.mobileContextService.userSettingsObservable\n        .pipe(\n          takeUntil(this.unsubscribe)\n        )\n        .subscribe((next) => {\n          this.settings = next;\n          this.canOptimize = this.status === OrderStatus.ON_THE_WAY_TO_CUSTOMER && this.settings.canDoRouteOptimization;\n          this.canReorder = this.status === OrderStatus.ON_THE_WAY_TO_CUSTOMER;\n          this.sendSequence = this.settings.sequenceOnSelect && (this.status === OrderStatus.READY_FOR_HAULAGE || this.status === OrderStatus.ON_THE_WAY_TO_PROVIDER);\n          if (this.status) {\n            this.statusSettings = this.settings.settingsForStatus(this.status);\n          }\n          if (this.content) {\n            // this.content.resize();\n          }\n          if (this.settings) {\n            this.settings.providers.some(provider => {\n              if (provider.hiddenForPage === undefined) {\n                provider.hiddenForPage = new Map<OrderStatus, boolean>();\n              }\n              if (this.status !== undefined) {\n                provider.hiddenForPage.set(this.status, provider.hidden);\n              }\n              return true;\n            });\n          }\n        });\n    }\n\n    if (!this.summarySubscription) {\n      this.summarySubscription = this.orderService.summaryObservable\n        .pipe(\n          takeUntil(this.unsubscribe)\n        )\n        .subscribe((summary: RouteSummary) => this.summary = summary);\n    }\n\n    if (!this.unreadNotificationCountSubscription) {\n      this.unreadNotificationCountSubscription = this.notificationService.unreadNotificationCountObservable\n        .pipe(\n          takeUntil(this.unsubscribe)\n        )\n        .subscribe((pending: number) => this.pendingNotifications = pending);\n    }\n\n    if (!this.ionicStatusSubscription) {\n      this.ionicStatusSubscription = this.ionicDeploy.observableStatus\n        .pipe(\n          takeUntil(this.unsubscribe)\n        )\n        .subscribe((status: IonicDeployStatus) => this.deployStatus = status);\n    }\n\n    if (!this.featureSubscription) {\n      this.featureSubscription = this.featuresService.featuresObservable\n        .pipe(\n          takeUntil(this.unsubscribe)\n        )\n        .subscribe(features => this.features = features);\n    }\n  }\n\n  ionViewDidLeave() {\n    this.cleanup();\n  }\n\n  private cleanup() {\n    clearInterval(this.timer);\n    this.unsubscribe.next();\n    this.unsubscribeAccessor.next();\n    this.orderAccessorSubscription = null;\n    this.orderAccessorSubscription = null;\n    this.searchControlSubscription = null;\n    this.connectionStatusSubscription = null;\n    this.userSettingsSubscription = null;\n    this.summarySubscription = null;\n    this.unreadNotificationCountSubscription = null;\n    this.ionicStatusSubscription = null;\n    this.featureSubscription = null;\n\n    this.unsubscribe.complete();\n    this.unsubscribeAccessor.complete();\n  }\n\n  displayConnectionDetail() {\n    this.connectionStatusService.displayTroobleshootingModal();\n  }\n\n  fullSync() {\n    this.ga.trackEvent(CONFIG.GA.EVENT.ORDER_LIST_FORCING_SYNC.NAME, CONFIG.GA.EVENT.ORDER_LIST_FORCING_SYNC.ACTION).catch(error => this.log.error(`Unable to track event ${CONFIG.GA.EVENT.ORDER_LIST_FORCING_SYNC} with GA`, error));\n    this.orderSync.fullSync()\n      .subscribe();\n  }\n\n  cancelSearchFilter() {\n    this.searching = false;\n    this.settingsManager.cancelSearch();\n  }\n\n  onSearchInput() {\n    this.searching = true;\n  }\n\n  showGroupHeader = (record: OrderView, recordIndex: number, records: Array<OrderView>) => {\n    try {\n      if (record) {\n        const workflowGroup = this.orderGroups.find(group => group.isWorkflowGroup());\n        const inWorkflowGroup = record.order.stateMachineWorkflow === 'PICKUP' && workflowGroup && workflowGroup.orders.find(view => view.order.id.toString() === record.order.id.toString());\n        if (recordIndex === 0 && inWorkflowGroup) {\n          return workflowGroup;\n        } else if (inWorkflowGroup) {\n          return null;\n        }\n        if (recordIndex === 0\n          || (record.order.tenantName !== records[recordIndex - 1].order.tenantName)\n          || (workflowGroup && records[recordIndex - 1].order.stateMachineWorkflow === 'PICKUP' && record.order.stateMachineWorkflow !== 'PICKUP')\n        ) {\n          if (this.orderGroups) {\n            const group = this.orderGroups.find(value => value.name === record.order.tenantName);\n            if (this.settings.selectedProviders) {\n              const provider = this.settings.selectedProviders.find(p => p.id === record.order.tenantId);\n              if (provider && group) {\n                group.subtitle = provider.address.addressOneLine;\n              }\n            }\n            if (group) {\n              return group;\n            }\n          }\n        }\n      }\n    } catch (e) {\n      console.warn('Group header:', e);\n    }\n    return null;\n  }\n\n  transitionDisabled(view: OrderView, transition: Transition): boolean {\n    if (view && transition) {\n      return (!this.connectionStatus.isNetworkConnectedForUser && transition.requireOnline) || (view.order && view.order.blocked);\n    }\n  }\n\n  transitionOrder(view: OrderView, transition: Transition, slidingItem: IonItemSliding) {\n    slidingItem.getSlidingRatio().then(value => {\n        if (value !== this.SLIDING_ITEM_OPEN_RATIO) {\n          return;\n        }\n\n        if (view) {\n          this.ga.trackEvent(CONFIG.GA.EVENT.ORDER_TRANSITION.NAME, CONFIG.GA.EVENT.ORDER_TRANSITION.ACTION, 'OrderTransition').catch(error => this.log.error(`Unable to track event ${CONFIG.GA.EVENT.ORDER_TRANSITION} with GA`, error));\n          view.order.local = true; // Quickly mark order as different from server\n          if (this.sendSequence && transition.to.name === 'ON_THE_WAY_TO_CUSTOMER') {\n            view.order.nextSequenceNumber = ++this.settings.nextSequenceNumber;\n          }\n          this.transitionService.transitionOrder(view.order, transition)\n            .subscribe((order: Order) => {\n              if (slidingItem) {\n                slidingItem.close();\n              }\n            }, () => {\n              view.order.local = false;\n            }, () => {\n              if (slidingItem) {\n                slidingItem.close();\n              }\n            });\n        }\n\n      }\n    );\n  }\n\n  transitionSelection(transition: Transition, callback: Subject<boolean>) {\n    const selectedOrders: Array<OrderView> = [];\n    this.orderGroups.forEach((orderGroup: OrderGroup) => {\n      orderGroup.orders.forEach((order: OrderView) => {\n        orderGroup.selected = false;\n        if (order.selected) {\n          if (this.containsTransition(transition, order.transitions)) {\n            selectedOrders.push(order);\n            order.selected = false;\n          }\n        }\n      });\n    });\n\n    this.updateSelection();\n    this.settings.actions.canSelect = this.hasOneSelected;\n    this.ga.trackEvent(CONFIG.GA.EVENT.MULTIPLE_SELECT_TRANSITION.NAME, CONFIG.GA.EVENT.MULTIPLE_SELECT_TRANSITION.ACTION, 'OrdersSelected', selectedOrders.length).catch(error => this.log.error(`Unable to track event ${CONFIG.GA.EVENT.MULTIPLE_SELECT_TRANSITION} with GA`, error));\n\n    // Put orders in right basket according to workflow and event name\n    const groupedByWorkflowEvent: Array<TransitionOrders> = [];\n    selectedOrders\n      .sort((a: OrderView, b: OrderView) => {\n        if (a.order.nextSequenceNumber && b.order.nextSequenceNumber) {\n          return a.order.nextSequenceNumber - b.order.nextSequenceNumber;\n        } else if (a.order.nextSequenceNumber && !b.order.nextSequenceNumber) {\n          return 1;\n        } else if (!a.order.nextSequenceNumber && b.order.nextSequenceNumber) {\n          return -1;\n        } else {\n          return 0;\n        }\n      })\n      .forEach((view: OrderView) => {\n        const activatedTransition = view.transitions.find((value: Transition) => transition.event.labelKey === value.event.labelKey);\n        let matchingTransition = groupedByWorkflowEvent.find((group: TransitionOrders) => group.matches(activatedTransition));\n        if (!matchingTransition) {\n          matchingTransition = new TransitionOrders(activatedTransition);\n          groupedByWorkflowEvent.push(matchingTransition);\n        }\n        if (this.sendSequence && transition.to.name === 'ON_THE_WAY_TO_CUSTOMER') {\n          view.order.nextSequenceNumber = ++this.settings.nextSequenceNumber;\n        }\n        matchingTransition.orders.push(view);\n      });\n\n    groupedByWorkflowEvent.forEach((transitionOrders: TransitionOrders) => {\n      this.transitionService.transitionOrders(transitionOrders.orders, transitionOrders.transition);\n    });\n    callback.next(true);\n  }\n\n  // noinspection JSUnusedGlobalSymbols\n  onPageWillLeave() {\n  }\n\n  async toggleOrdering() {\n    if (!this.canReorder) {\n      // toast on can reorder is false\n      const toast = await this.toastCtrl\n        .create({\n          message: this.translateService.instant('messages.errors.reordering_unavailable'),\n          position: 'bottom',\n          buttons: [{\n            text: this.translateService.instant('actions.ok'),\n            role: 'cancel'\n          }],\n          duration: 3 * 1000,\n          cssClass: 'processing-toast'\n        });\n      toast.present();\n    } else if (this.allOrders && this.allOrders.length) {\n      this.settings.actions.canSelect = false;\n      this.settings.actions.canReorder = !this.settings.actions.canReorder;\n      const itemModal = await this.modalCtrl.create({\n        component: ReorderModalPage,\n        componentProps: {\n          allOrders: this.allOrders,\n          orderGroups: this.orderGroups,\n          canOptimize: this.canOptimize,\n          withDistance: this.statusSettings.sortOrder === 'distance'\n        }\n      });\n\n      itemModal.onDidDismiss().then(\n        (data) => {\n          this.settings.actions.canReorder = !this.settings.actions.canReorder;\n          if (data && data.data && data.data.success) {\n            this.settings.nextSequenceNumber = data.data.maxSequence || this.allOrders.length;\n            this.statusSettings.groupByProvider = false;\n            if (this.statusSettings.sortOrder !== 'sequence') {\n              this.statusSettings.previousSortOrder = this.statusSettings.sortOrder;\n              this.statusSettings.sortOrder = 'sequence';\n              this.settingsManager.sortChanged();\n            }\n          }\n          this.orderService.applyFilterAndSort();\n        }\n      );\n\n      await itemModal.present();\n    } else {\n      // nothing to do, there is nothing to reorder\n      const toast = await this.toastCtrl\n        .create({\n          message: this.translateService.instant('messages.errors.reordering_no_orders'),\n          position: 'bottom',\n          buttons: [{\n            text: this.translateService.instant('actions.ok'),\n            role: 'cancel'\n          }],\n          duration: 3 * 1000,\n          cssClass: 'processing-toast'\n        });\n      await toast.present();\n    }\n  }\n\n  changeAllSelection(option) {\n    this.orderGroups.forEach((orderGroup: OrderGroup) => {\n      orderGroup.selected = this.allSelected;\n      orderGroup.orders.forEach((order: OrderView) => {\n        if (!order.hidden) {\n          order.selected = this.allSelected;\n          if (order.selected && this.sendSequence) {\n            order.order.nextSequenceNumber = ++this.dummySequenceNumber;\n          } else {\n            order.order.nextSequenceNumber = null;\n          }\n        }\n      });\n    });\n    this.updateSelection();\n  }\n\n\n  changeGroupSelection(group: OrderGroup, option) {\n    group.orders.forEach((order: OrderView) => {\n      if (!order.hidden) {\n        order.selected = group.selected;\n        if (order.selected && this.sendSequence) {\n          order.order.nextSequenceNumber = ++this.dummySequenceNumber;\n        } else {\n          order.order.nextSequenceNumber = null;\n        }\n      }\n    });\n    this.updateSelection();\n  }\n\n  toggleSelect(): void {\n    this.allSelected = false;\n    this.settings.actions.canReorder = false;\n    this.settings.actions.canSelect = !this.settings.actions.canSelect;\n    if (!this.settings.actions.canSelect) {\n      // Reset selection\n      this.orderGroups\n        .forEach((orderGroup: OrderGroup) => {\n          orderGroup.selected = false;\n          orderGroup.orders\n            .forEach((order: OrderView) => {\n              order.selected = false;\n              order.order.nextSequenceNumber = null;\n            });\n        });\n    }\n\n    this.updateSelection();\n\n    this.ga.trackEvent(CONFIG.GA.EVENT['ORDER_LIST-MULTIPLE_SELECT'].NAME, CONFIG.GA.EVENT['ORDER_LIST-MULTIPLE_SELECT'].ACTION).catch(error => this.log.error(`Unable to track event ${CONFIG.GA.EVENT['ORDER_LIST-MULTIPLE_SELECT']} with GA`, error));\n  }\n\n  async selectItem(event, orderView: OrderView) {\n    if (this.settings.actions.canReorder) {\n      // Can we manage reorder here?\n    } else if (this.settings.actions.canSelect) {\n      // Toggle selection status\n      orderView.selected = !orderView.selected;\n      this.markItem(orderView);\n    } else {\n      const itemModal = await this.modalCtrl.create({\n        id: 'order-detail-tabs-page',\n        component: OrderDetailTabsPage,\n        componentProps: {orderView}\n      });\n      await itemModal.present();\n    }\n  }\n\n  markItem(orderView: OrderView) {\n    if (orderView.selected && this.sendSequence) {\n      orderView.order.nextSequenceNumber = ++this.dummySequenceNumber;\n    } else {\n      orderView.order.nextSequenceNumber = null;\n    }\n\n    this.updateSelection();\n  }\n\n  toggleGroupView(groupName: string) {\n    this.settings.providers.some(provider => {\n      if (provider.name === groupName) {\n        provider.hidden = !provider.hidden;\n        if (provider.hiddenForPage === undefined) {\n          provider.hiddenForPage = new Map<OrderStatus, boolean>();\n        }\n        if (this.status !== undefined) {\n          provider.hiddenForPage.set(this.status, provider.hidden);\n        }\n        return true;\n      }\n    });\n\n    this.manageNewOrders(this.accessor);\n  }\n\n  identify(index, orderView: OrderView) {\n    return orderView.order.id;\n  }\n\n  itemHeightFn = (item: OrderView, index) => {\n    return orderViewHeight(item, this.statusSettings, this.settings, this.isIos);\n  }\n\n  headerHeight(header, index) {\n    return headerHeight(header);\n  }\n\n  groupViewHidden(groupName: string): boolean {\n    if (groupName && groupName.startsWith('workflows.names')) {\n      return this.disabledSpecialGroups.indexOf(groupName) > -1;\n    }\n    return (\n      this.settings.providers.find((provider: Provider) => {\n        return provider.name === groupName;\n      })\n      || {hidden: false}\n    ).hidden;\n  }\n\n  shouldHideItem(orderItem: OrderView, group: OrderGroup): boolean {\n    const byOrderItemHidden = orderItem.hidden;\n    const byGroupName = (group.isWorkflowGroup() && this.groupViewHidden(group.name));\n    const byTenant = (!group.isWorkflowGroup() && this.groupViewHidden(orderItem.order.tenantName));\n    return byOrderItemHidden || byGroupName || byTenant;\n  }\n\n  async openMap() {\n    const modalPage = await this.modalCtrl.create(\n      {\n        component: MapPage,\n        componentProps: {isNetworkConnectedForUser: this.connectionStatus.isNetworkConnectedForUser}\n      }\n    );\n    modalPage.present();\n    /*this.appCtrl.getRootNavs()[0].push('MapPage', null, {\n      animate: true,\n      direction: 'forward'\n    });*/\n  }\n\n  async optimizeRoute() {\n    if (!this.settings.canDoRouteOptimization || !this.allOrders || this.allOrders.length === 0 || this.allOrders.filter(o => OrderStatusConverter.convert(o.order.status) === OrderStatus.ON_THE_WAY_TO_CUSTOMER).length <= 1) {\n      const toast = await this.toastCtrl\n        .create({\n          message: this.translateService.instant('messages.errors.reordering_no_orders'),\n          position: 'bottom',\n          buttons: [{\n            text: this.translateService.instant('actions.ok'),\n            role: 'cancel'\n          }],\n          duration: 3 * 1000,\n          cssClass: 'processing-toast'\n        });\n      await toast.present();\n    } else if (this.canOptimize) {\n      const itemModal = await this.modalCtrl.create({\n        component: OptimizeOptionsPage,\n        componentProps: {\n          routeSummary: this.summary\n        }\n      });\n\n      itemModal.onDidDismiss().then(data => {\n        if (data && data.data && data.data.startPosition) {\n          this.optimizationInProgress = true;\n          this.orderSync.optimizeRoute(data.data.startPosition, data.data.endPosition, data.data.positionType, data.data.startAt, data.data.withTimeConstraints)\n            .subscribe((summary: RouteSummary) => {\n                this.orderService.updateSummary(summary);\n                this.optimizationInProgress = false;\n\n                this.statusSettings.groupByProvider = false;\n\n                if (this.statusSettings.sortOrder !== 'sequence') {\n                  this.statusSettings.previousSortOrder = this.statusSettings.sortOrder;\n                  this.statusSettings.sortOrder = 'sequence';\n                  this.settingsManager.sortChanged();\n                }\n\n                this.orderService.applyFilterAndSort();\n\n              },\n              async error => {\n                if (error.status === 429 || error.name === 'TOO_MANY_REQUESTS') {\n                  const toast = await this.toastCtrl.create({\n                    message: this.translateService.instant('messages.errors.optimization_limit_reached'),\n                    position: 'bottom',\n                    buttons: [{\n                      text: this.translateService.instant('actions.ok'),\n                      role: 'cancel'\n                    }],\n                    duration: 10 * 1000,\n                    cssClass: 'processing-toast'\n                  });\n                  await toast.present();\n                }\n                this.optimizationInProgress = false;\n              });\n        }\n      });\n\n      await itemModal.present();\n\n    } else {\n      const message = this.settings.canDoRouteOptimization ?\n        this.translateService.instant('messages.errors.optimization_unavailable') :\n        this.translateService.instant('messages.errors.optimization_disabled');\n      const toast = await this.toastCtrl\n        .create({\n          message,\n          position: 'bottom',\n          buttons: [{\n            text: this.translateService.instant('actions.ok'),\n            role: 'cancel'\n          }],\n          duration: 3 * 1000,\n          cssClass: 'processing-toast'\n        });\n      toast.present();\n    }\n  }\n\n  updateSelection() {\n    let hasAtLeastOneSelected = false;\n    this.transitionsSelection = [];\n    this.orderGroups.forEach((orderGroup: OrderGroup) => {\n      orderGroup.orders.forEach((order: OrderView) => {\n        if (order.selected && !order.hidden) {\n          hasAtLeastOneSelected = true;\n          order.transitions.forEach((transition) => {\n            if (!this.containsTransition(transition, this.transitionsSelection)) {\n              // console.log('adding transition', transition, transition.workflow);\n              this.transitionsSelection.push(transition);\n            }\n          });\n        }\n      });\n    });\n\n    this.transitionsSelection.sort((a, b): number => {\n      if (a.event.rank < b.event.rank) {\n        return -1;\n      }\n      if (a.event.rank > b.event.rank) {\n        return 1;\n      }\n      return 0;\n    });\n\n    if (this.hasOneSelected !== hasAtLeastOneSelected) {\n      // this.content.resize();\n      this.hasOneSelected = hasAtLeastOneSelected;\n    }\n  }\n\n  openProperties(ev: UIEvent) {\n    this.menuCtrl.toggle('SORT_AND_FILTER_MENU');\n  }\n\n  resetFilters() {\n    this.settingsManager.resetFilters();\n  }\n\n  protected manageNewOrders(accessor: OrdersAccessor) {\n    if (this.status) {\n      const byStatus = accessor.getList(this.status);\n      // NOTE: we clone the array using spread operator to force change detection\n      this.orderGroups = byStatus ? [...byStatus.groups]: [];\n      let groupA = null, groupB = null;\n      try {\n        this.orderGroups.sort((a: OrderGroup, b: OrderGroup) => {\n          groupA = a;\n          groupB = b;\n          if (a.isWorkflowGroup() || b.isWorkflowGroup()) {\n            return a.isWorkflowGroup() ? -1 : 1;\n          } else {\n            return a.isWorkflowGroup() ? -1 : (\n              (a.name && b.name) ? a.name.localeCompare(b.name) : (\n                (!a.name) ? -1 : 1\n              )\n            );\n          }\n        });\n      } catch (e) {\n        this.log.error('Problem sorting ', groupA, groupB);\n      }\n\n      if (!this.allOrders) {\n        this.allOrders = [];\n      }\n      this.allOrders.splice(0, this.allOrders.length);\n      // this.allOrders = [];\n      // this.ngZone.run(() => {\n      this.orderGroups.forEach((group) => {\n        // Reassign visibility according to provider setting\n        this.settings.providers.forEach(provider => {\n          if (provider.name === group.name) {\n            if (provider.hiddenForPage !== undefined) {\n              if (provider.hiddenForPage.get(this.status) === undefined) {\n                provider.hiddenForPage.set(this.status, false);\n                group.hidden = provider.hiddenForPage.get(this.status);\n              }\n            }\n          }\n        });\n\n        if (!group.hidden) {\n          if (this.statusSettings.activeFilter.filtering) {\n            group.orders.forEach(view => {\n              if (!view.hidden) {\n                const existingInList = this.allOrders.findIndex((value) => value.order.id.toString() === view.order.id.toString());\n                if (existingInList < 0) { // PM-436\n                  this.allOrders.push(view);\n                } else {\n                  this.log.warn('Trying to add an existing view to status ', this.status, view);\n                }\n              }\n            });\n          } else {\n            if (this.allOrders.length > 0) {\n              this.log.trace(`Added ${group.orders.length} orders to array of ${this.allOrders.length}`);\n            }\n            Array.prototype.push.apply(this.allOrders, group.orders);\n          }\n        }\n        this.allOrders = [...this.allOrders];\n      });\n\n    }\n  }\n  /**\n   * Method to track changes in the order list\n   * For more details please see cdkVirtualForTrackBy here https://material.angular.io/cdk/scrolling/api\n   * NOTE: we may want to make the trackBy less complex and use other means to track changes\n   */\n  public trackOrderGroupBy(_index: number, item: OrderGroup): number {\n    return this.commonUtils.hashCode(item);\n  }\n\n  private containsTransition(transition: Transition, transitions: Array<Transition>): boolean {\n    let contains = false;\n    for (let k = 0, len = transitions.length; k < len; k++) {\n      const existingTransition = transitions[k];\n      if (existingTransition.event.labelKey === transition.event.labelKey) {\n        contains = true;\n      }\n    }\n    return contains;\n  }\n\n  groupOrders() {\n    this.settingsManager.flipGrouping(this.status);\n    this.settingsManager.sortChanged();\n  }\n\n  async openSortMenu(ev: UIEvent) {\n    const popover = await this.popoverCtrl.create({\n      component: SortPopoverPage,\n      event: ev\n    });\n    await popover.present();\n  }\n\n  hints() {\n    if (!this.hintsIntroJs) {\n      this.hintsIntroJs = introJs();\n      this.hintsIntroJs.setOptions({\n        hintButtonLabel: 'Ok',\n        hints: [\n          {\n            element: '.selection-intro',\n            hint: 'Sélection multiple'\n          },\n          // {element: '.native-map-intro', hint: 'This opens the map'},\n          {element: '.ordering-intro', hint: 'Reorder delivery sequence'},\n          {\n            element: '.optimize-intro',\n            hint: 'Optimize your route.<br /> <em>Route optimization</em> is only available if your manager contacted Mobilus to activate it'\n          },\n          {element: '.grouping-intro', hint: 'Grouper par organisation'},\n          {element: '.sort-intro', hint: 'Tri des commandes'},\n          {element: '.filter-intro', hint: 'Recherche et filtre sur les commandes'},\n\n        ]\n      });\n\n      // this.introJs.addHints();\n      this.hintsIntroJs.showHints();\n    }\n    if (!this.withHints) {\n      this.withHints = true;\n      this.hintsIntroJs.showHints();\n\n    } else {\n      this.withHints = false;\n      this.hintsIntroJs.hideHints();\n    }\n  }\n\n  openMenu(ev: UIEvent) {\n    this.menuCtrl.toggle('MAIN_MENU');\n  }\n\n  itemSwiped() {\n    this.ga.trackEvent(CONFIG.GA.EVENT.ORDER_ITEM_SWIPE.NAME, CONFIG.GA.EVENT.ORDER_ITEM_SWIPE.ACTION, 'OrderSwiped')\n      .catch(error => this.log.error(`Unable to track event ${CONFIG.GA.EVENT.ORDER_ITEM_SWIPE} with GA`, error));\n  }\n\n  openMapForProvider(provider: SelectedProvider) {\n    this.mapService.openMap(null, provider.position, provider.address.addressOneLine, provider.name);\n  }\n}\n"]}